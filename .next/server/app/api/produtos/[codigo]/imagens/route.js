/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "app/api/produtos/[codigo]/imagens/route";
exports.ids = ["app/api/produtos/[codigo]/imagens/route"];
exports.modules = {

/***/ "(rsc)/./app/api/produtos/[codigo]/imagens/route.ts":
/*!****************************************************!*\
  !*** ./app/api/produtos/[codigo]/imagens/route.ts ***!
  \****************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   DELETE: () => (/* binding */ DELETE),\n/* harmony export */   GET: () => (/* binding */ GET),\n/* harmony export */   PATCH: () => (/* binding */ PATCH),\n/* harmony export */   POST: () => (/* binding */ POST),\n/* harmony export */   PUT: () => (/* binding */ PUT),\n/* harmony export */   dynamic: () => (/* binding */ dynamic)\n/* harmony export */ });\n/* harmony import */ var next_server__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/server */ \"(rsc)/./node_modules/next/dist/api/server.js\");\n/* harmony import */ var fs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! fs */ \"fs\");\n/* harmony import */ var fs__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(fs__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var path__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! path */ \"path\");\n/* harmony import */ var path__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(path__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var sharp__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! sharp */ \"sharp\");\n/* harmony import */ var sharp__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(sharp__WEBPACK_IMPORTED_MODULE_3__);\n\n\n\n\nconst MAX_IMAGES = 4;\n// Salva dentro de public/upload para servir estaticamente via /upload/...\nconst UPLOAD_DIR = path__WEBPACK_IMPORTED_MODULE_2___default().join(process.cwd(), 'public', 'upload');\nconst MAX_FILE_SIZE = 10 * 1024 * 1024 // 10MB\n;\nconst ALLOWED_MIME = [\n    'image/png',\n    'image/jpeg',\n    'image/jpg',\n    'image/webp'\n];\nasync function ensureDir() {\n    await fs__WEBPACK_IMPORTED_MODULE_1__.promises.mkdir(UPLOAD_DIR, {\n        recursive: true\n    });\n}\nfunction buildFileName(codigo, position) {\n    return position === 1 ? `${codigo}.png` : `${codigo}_${position}.png`;\n}\nfunction buildThumbName(main) {\n    return main.replace(/\\.png$/i, '_thumb.png');\n}\nasync function listImages(codigo) {\n    try {\n        const files = await fs__WEBPACK_IMPORTED_MODULE_1__.promises.readdir(UPLOAD_DIR);\n        const prefix = `${codigo}`;\n        const filtered = files.filter((f)=>f.startsWith(prefix) && f.endsWith('.png') && !f.endsWith('_thumb.png')).map((f)=>{\n            const m = f.match(/^(\\d+)(?:_(\\d+))?\\.png$/);\n            const pos = m && m[2] ? parseInt(m[2], 10) : 1;\n            return {\n                file: f,\n                pos\n            };\n        }).sort((a, b)=>a.pos - b.pos);\n        return filtered.map((i)=>({\n                name: i.file,\n                url: `/upload/${i.file}`,\n                pos: i.pos\n            }));\n    } catch  {\n        return [];\n    }\n}\nasync function GET(_req, { params }) {\n    await ensureDir();\n    const imgs = await listImages(params.codigo);\n    return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n        success: true,\n        imagens: imgs\n    });\n}\n// Upload nova imagem (multipart/form-data) campos: file, crop (json opcional com {x,y,w,h,scale})\nasync function POST(req, { params }) {\n    const codigo = params.codigo;\n    await ensureDir();\n    try {\n        const formData = await req.formData();\n        const file = formData.get('file');\n        if (!file) return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            success: false,\n            error: 'Arquivo ausente'\n        }, {\n            status: 400\n        });\n        if (file.size > MAX_FILE_SIZE) return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            success: false,\n            error: 'Arquivo excede 10MB'\n        }, {\n            status: 400\n        });\n        if (!ALLOWED_MIME.includes(file.type)) return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            success: false,\n            error: 'Formato inv√°lido'\n        }, {\n            status: 400\n        });\n        const cropRaw = formData.get('crop');\n        let crop = null;\n        if (cropRaw) {\n            try {\n                crop = JSON.parse(cropRaw);\n            } catch  {}\n        }\n        const buff = Buffer.from(await file.arrayBuffer());\n        // Determinar pr√≥xima posi√ß√£o\n        const existing = await listImages(codigo);\n        if (existing.length >= MAX_IMAGES) {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                success: false,\n                error: 'Limite m√°ximo de 4 imagens'\n            }, {\n                status: 400\n            });\n        }\n        const nextPos = existing.length + 1;\n        const filename = buildFileName(codigo, nextPos);\n        let img = sharp__WEBPACK_IMPORTED_MODULE_3___default()(buff);\n        const meta = await img.metadata();\n        if (crop && crop.w && crop.h) {\n            const x = Math.max(0, Math.min(crop.x || 0, meta.width || 0));\n            const y = Math.max(0, Math.min(crop.y || 0, meta.height || 0));\n            const w = Math.min(crop.w, meta.width || crop.w);\n            const h = Math.min(crop.h, meta.height || crop.h);\n            img = img.extract({\n                left: Math.round(x),\n                top: Math.round(y),\n                width: Math.round(w),\n                height: Math.round(h)\n            });\n        }\n        if (crop && crop.scale && crop.scale !== 1) {\n            img = img.resize({\n                width: Math.round((meta.width || 0) * crop.scale) || undefined\n            });\n        }\n        const outPath = path__WEBPACK_IMPORTED_MODULE_2___default().join(UPLOAD_DIR, filename);\n        await img.png({\n            compressionLevel: 9\n        }).toFile(outPath);\n        // Gerar thumbnail 300px (manter propor√ß√£o) se maior\n        try {\n            const thumbPath = path__WEBPACK_IMPORTED_MODULE_2___default().join(UPLOAD_DIR, buildThumbName(filename));\n            await sharp__WEBPACK_IMPORTED_MODULE_3___default()(outPath).resize({\n                width: 300,\n                withoutEnlargement: true\n            }).png({\n                compressionLevel: 9\n            }).toFile(thumbPath);\n        } catch (e) {\n            console.warn('Falha gerar thumbnail', e);\n        }\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            success: true,\n            file: filename,\n            pos: nextPos\n        });\n    } catch (e) {\n        console.error('UPLOAD ERRO', e);\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            success: false,\n            error: 'Falha upload',\n            detalhe: e.message\n        }, {\n            status: 500\n        });\n    }\n}\n// Reordenar: body { ordem: [\"200.png\",\"200_2.png\", ...] }\nasync function PUT(req, { params }) {\n    const codigo = params.codigo;\n    await ensureDir();\n    try {\n        const body = await req.json();\n        const ordem = body?.ordem || [];\n        if (!Array.isArray(ordem) || !ordem.length) return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            success: false,\n            error: 'Lista vazia'\n        }, {\n            status: 400\n        });\n        // Filtrar somente deste produto\n        const valid = ordem.filter((n)=>n.startsWith(codigo));\n        const pairs = [];\n        let pos = 1;\n        for (const original of valid){\n            const finalName = buildFileName(codigo, pos);\n            if (original !== finalName) {\n                const tempName = `${original}.reorder_tmp` // garantir unicidade\n                ;\n                // rename original -> temp\n                try {\n                    await fs__WEBPACK_IMPORTED_MODULE_1__.promises.rename(path__WEBPACK_IMPORTED_MODULE_2___default().join(UPLOAD_DIR, original), path__WEBPACK_IMPORTED_MODULE_2___default().join(UPLOAD_DIR, tempName));\n                    // thumbnail temp\n                    const origThumb = path__WEBPACK_IMPORTED_MODULE_2___default().join(UPLOAD_DIR, buildThumbName(original));\n                    try {\n                        await fs__WEBPACK_IMPORTED_MODULE_1__.promises.stat(origThumb);\n                        await fs__WEBPACK_IMPORTED_MODULE_1__.promises.rename(origThumb, path__WEBPACK_IMPORTED_MODULE_2___default().join(UPLOAD_DIR, buildThumbName(tempName)));\n                    } catch  {}\n                    pairs.push({\n                        temp: tempName,\n                        final: finalName,\n                        original\n                    });\n                } catch (e) {\n                    console.warn('fase1 reorder rename falhou', original, e);\n                }\n            }\n            pos++;\n        }\n        // Segunda fase: temp -> final\n        for (const p of pairs){\n            try {\n                await fs__WEBPACK_IMPORTED_MODULE_1__.promises.rename(path__WEBPACK_IMPORTED_MODULE_2___default().join(UPLOAD_DIR, p.temp), path__WEBPACK_IMPORTED_MODULE_2___default().join(UPLOAD_DIR, p.final));\n                const tempThumb = path__WEBPACK_IMPORTED_MODULE_2___default().join(UPLOAD_DIR, buildThumbName(p.temp));\n                try {\n                    await fs__WEBPACK_IMPORTED_MODULE_1__.promises.stat(tempThumb);\n                    await fs__WEBPACK_IMPORTED_MODULE_1__.promises.rename(tempThumb, path__WEBPACK_IMPORTED_MODULE_2___default().join(UPLOAD_DIR, buildThumbName(p.final)));\n                } catch  {}\n            } catch (e) {\n                console.warn('fase2 reorder rename falhou', p, e);\n            }\n        }\n        const imagens = await listImages(codigo);\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            success: true,\n            imagens\n        });\n    } catch (e) {\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            success: false,\n            error: 'Falha reorder',\n            detalhe: e.message\n        }, {\n            status: 500\n        });\n    }\n}\n// DELETE ?nome=200_2.png\nasync function DELETE(req, { params }) {\n    const codigo = params.codigo;\n    await ensureDir();\n    const { searchParams } = new URL(req.url);\n    const nome = searchParams.get('nome');\n    if (!nome) return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n        success: false,\n        error: 'Param nome ausente'\n    }, {\n        status: 400\n    });\n    if (!nome.startsWith(codigo)) return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n        success: false,\n        error: 'Arquivo n√£o pertence ao produto'\n    }, {\n        status: 400\n    });\n    try {\n        await fs__WEBPACK_IMPORTED_MODULE_1__.promises.unlink(path__WEBPACK_IMPORTED_MODULE_2___default().join(UPLOAD_DIR, nome));\n        // Apagar thumbnail associado\n        try {\n            await fs__WEBPACK_IMPORTED_MODULE_1__.promises.unlink(path__WEBPACK_IMPORTED_MODULE_2___default().join(UPLOAD_DIR, buildThumbName(nome)));\n        } catch  {}\n    } catch (e) {\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            success: false,\n            error: 'Arquivo n√£o encontrado'\n        }, {\n            status: 404\n        });\n    }\n    // Recompactar ordem para evitar buracos\n    const imgs = await listImages(codigo);\n    // Renomear em sequ√™ncia\n    // Compacta√ß√£o segura p√≥s exclus√£o\n    let pos = 1;\n    const compPairs = [];\n    for (const img of imgs){\n        const finalName = buildFileName(codigo, pos);\n        if (img.name !== finalName) {\n            const tempName = `${img.name}.compact_tmp`;\n            try {\n                await fs__WEBPACK_IMPORTED_MODULE_1__.promises.rename(path__WEBPACK_IMPORTED_MODULE_2___default().join(UPLOAD_DIR, img.name), path__WEBPACK_IMPORTED_MODULE_2___default().join(UPLOAD_DIR, tempName));\n                const oldThumb = path__WEBPACK_IMPORTED_MODULE_2___default().join(UPLOAD_DIR, buildThumbName(img.name));\n                try {\n                    await fs__WEBPACK_IMPORTED_MODULE_1__.promises.stat(oldThumb);\n                    await fs__WEBPACK_IMPORTED_MODULE_1__.promises.rename(oldThumb, path__WEBPACK_IMPORTED_MODULE_2___default().join(UPLOAD_DIR, buildThumbName(tempName)));\n                } catch  {}\n                compPairs.push({\n                    temp: tempName,\n                    final: finalName\n                });\n            } catch (e) {\n                console.warn('compact fase1 falhou', img.name, e);\n            }\n        }\n        pos++;\n    }\n    for (const p of compPairs){\n        try {\n            await fs__WEBPACK_IMPORTED_MODULE_1__.promises.rename(path__WEBPACK_IMPORTED_MODULE_2___default().join(UPLOAD_DIR, p.temp), path__WEBPACK_IMPORTED_MODULE_2___default().join(UPLOAD_DIR, p.final));\n            const tThumb = path__WEBPACK_IMPORTED_MODULE_2___default().join(UPLOAD_DIR, buildThumbName(p.temp));\n            try {\n                await fs__WEBPACK_IMPORTED_MODULE_1__.promises.stat(tThumb);\n                await fs__WEBPACK_IMPORTED_MODULE_1__.promises.rename(tThumb, path__WEBPACK_IMPORTED_MODULE_2___default().join(UPLOAD_DIR, buildThumbName(p.final)));\n            } catch  {}\n        } catch (e) {\n            console.warn('compact fase2 falhou', p, e);\n        }\n    }\n    const finalList = await listImages(codigo);\n    return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n        success: true,\n        imagens: finalList\n    });\n}\nconst dynamic = 'force-dynamic';\n// PATCH: swap positions { acao:'swap', from: number, to: number }\nasync function PATCH(req, { params }) {\n    const codigo = params.codigo;\n    console.log('üîÑ API SWAP DEBUG - Recebendo PATCH para c√≥digo:', codigo);\n    await ensureDir();\n    try {\n        const body = await req.json();\n        console.log('üîÑ API SWAP DEBUG - Body recebido:', body);\n        if (body?.acao !== 'swap') return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            success: false,\n            error: 'A√ß√£o inv√°lida'\n        }, {\n            status: 400\n        });\n        const from = parseInt(body.from, 10);\n        const to = parseInt(body.to, 10);\n        console.log('üîÑ API SWAP DEBUG - Posi√ß√µes:', {\n            from,\n            to\n        });\n        if (!from || !to || from === to) return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            success: false,\n            error: 'Par√¢metros inv√°lidos'\n        }, {\n            status: 400\n        });\n        if (from < 1 || to < 1 || from > MAX_IMAGES || to > MAX_IMAGES) return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            success: false,\n            error: 'Fora do limite'\n        }, {\n            status: 400\n        });\n        const fileFrom = buildFileName(codigo, from);\n        const fileTo = buildFileName(codigo, to);\n        const pathFrom = path__WEBPACK_IMPORTED_MODULE_2___default().join(UPLOAD_DIR, fileFrom);\n        const pathTo = path__WEBPACK_IMPORTED_MODULE_2___default().join(UPLOAD_DIR, fileTo);\n        console.log('üîÑ API SWAP DEBUG - Arquivos:', {\n            fileFrom,\n            fileTo,\n            pathFrom,\n            pathTo\n        });\n        // Verificar exist√™ncia\n        try {\n            await fs__WEBPACK_IMPORTED_MODULE_1__.promises.stat(pathFrom);\n            console.log('üîÑ API SWAP DEBUG - Arquivo FROM existe');\n        } catch  {\n            console.log('‚ùå API SWAP DEBUG - Arquivo FROM n√£o existe');\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                success: false,\n                error: 'Origem inexistente'\n            }, {\n                status: 404\n            });\n        }\n        try {\n            await fs__WEBPACK_IMPORTED_MODULE_1__.promises.stat(pathTo);\n            console.log('üîÑ API SWAP DEBUG - Arquivo TO existe');\n        } catch  {\n            console.log('‚ùå API SWAP DEBUG - Arquivo TO n√£o existe');\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                success: false,\n                error: 'Destino inexistente'\n            }, {\n                status: 404\n            });\n        }\n        const temp = `${fileFrom}.swap_tmp`;\n        const tempPath = path__WEBPACK_IMPORTED_MODULE_2___default().join(UPLOAD_DIR, temp);\n        console.log('üîÑ API SWAP DEBUG - Iniciando swap com temp:', temp);\n        // swap principal\n        await fs__WEBPACK_IMPORTED_MODULE_1__.promises.rename(pathFrom, tempPath);\n        await fs__WEBPACK_IMPORTED_MODULE_1__.promises.rename(pathTo, pathFrom);\n        await fs__WEBPACK_IMPORTED_MODULE_1__.promises.rename(tempPath, pathTo);\n        console.log('‚úÖ API SWAP DEBUG - Swap principal conclu√≠do');\n        // swap thumbs se existirem\n        const thumbFrom = buildThumbName(fileFrom);\n        const thumbTo = buildThumbName(fileTo);\n        const thumbFromPath = path__WEBPACK_IMPORTED_MODULE_2___default().join(UPLOAD_DIR, thumbFrom);\n        const thumbToPath = path__WEBPACK_IMPORTED_MODULE_2___default().join(UPLOAD_DIR, thumbTo);\n        console.log('üîÑ API SWAP DEBUG - Tentando swap thumbs:', {\n            thumbFrom,\n            thumbTo\n        });\n        try {\n            await fs__WEBPACK_IMPORTED_MODULE_1__.promises.stat(thumbFromPath);\n            await fs__WEBPACK_IMPORTED_MODULE_1__.promises.stat(thumbToPath);\n            const tempThumb = `${thumbFrom}.swap_tmp`;\n            await fs__WEBPACK_IMPORTED_MODULE_1__.promises.rename(thumbFromPath, path__WEBPACK_IMPORTED_MODULE_2___default().join(UPLOAD_DIR, tempThumb));\n            await fs__WEBPACK_IMPORTED_MODULE_1__.promises.rename(thumbToPath, thumbFromPath);\n            await fs__WEBPACK_IMPORTED_MODULE_1__.promises.rename(path__WEBPACK_IMPORTED_MODULE_2___default().join(UPLOAD_DIR, tempThumb), thumbToPath);\n            console.log('‚úÖ API SWAP DEBUG - Swap thumbs conclu√≠do');\n        } catch  {\n            console.log('‚ö†Ô∏è API SWAP DEBUG - Thumbs n√£o encontrados ou erro no swap thumbs');\n        }\n        const imagens = await listImages(codigo);\n        console.log('‚úÖ API SWAP DEBUG - Success, retornando imagens:', imagens);\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            success: true,\n            imagens\n        });\n    } catch (e) {\n        console.log('‚ùå API SWAP DEBUG - Erro:', e);\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            success: false,\n            error: 'Falha swap',\n            detalhe: e.message\n        }, {\n            status: 500\n        });\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9hcHAvYXBpL3Byb2R1dG9zL1tjb2RpZ29dL2ltYWdlbnMvcm91dGUudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7OztBQUF1RDtBQUNwQjtBQUNaO0FBQ0U7QUFFekIsTUFBTUssYUFBYTtBQUNuQiwwRUFBMEU7QUFDMUUsTUFBTUMsYUFBYUgsZ0RBQVMsQ0FBQ0ssUUFBUUMsR0FBRyxJQUFJLFVBQVU7QUFDdEQsTUFBTUMsZ0JBQWdCLEtBQUssT0FBTyxLQUFLLE9BQU87O0FBQzlDLE1BQU1DLGVBQWU7SUFBQztJQUFhO0lBQWM7SUFBYTtDQUFhO0FBRTNFLGVBQWVDO0lBQ2IsTUFBTVYsd0NBQUVBLENBQUNXLEtBQUssQ0FBQ1AsWUFBWTtRQUFFUSxXQUFXO0lBQUs7QUFDL0M7QUFFQSxTQUFTQyxjQUFjQyxNQUFjLEVBQUVDLFFBQWdCO0lBQ3JELE9BQU9BLGFBQWEsSUFBSSxHQUFHRCxPQUFPLElBQUksQ0FBQyxHQUFHLEdBQUdBLE9BQU8sQ0FBQyxFQUFFQyxTQUFTLElBQUksQ0FBQztBQUN2RTtBQUNBLFNBQVNDLGVBQWVDLElBQVk7SUFDbEMsT0FBT0EsS0FBS0MsT0FBTyxDQUFDLFdBQVc7QUFDakM7QUFFQSxlQUFlQyxXQUFXTCxNQUFjO0lBQ3RDLElBQUk7UUFDRixNQUFNTSxRQUFRLE1BQU1wQix3Q0FBRUEsQ0FBQ3FCLE9BQU8sQ0FBQ2pCO1FBQy9CLE1BQU1rQixTQUFTLEdBQUdSLFFBQVE7UUFDMUIsTUFBTVMsV0FBV0gsTUFDZEksTUFBTSxDQUFDQyxDQUFBQSxJQUFLQSxFQUFFQyxVQUFVLENBQUNKLFdBQVdHLEVBQUVFLFFBQVEsQ0FBQyxXQUFXLENBQUNGLEVBQUVFLFFBQVEsQ0FBQyxlQUN0RUMsR0FBRyxDQUFDSCxDQUFBQTtZQUNILE1BQU1JLElBQUlKLEVBQUVLLEtBQUssQ0FBQztZQUNsQixNQUFNQyxNQUFNRixLQUFLQSxDQUFDLENBQUMsRUFBRSxHQUFHRyxTQUFTSCxDQUFDLENBQUMsRUFBRSxFQUFFLE1B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O1lBQUU3QyxRQUFRO1FBQUk7SUFDdEc7QUFDRiIsInNvdXJjZXMiOlsiQzpcXFVzZXJzXFxvbmR5ZFxcRG9jdW1lbnRzXFxyZXRhZ3VhcmRhX25ld1xcYXBwXFxhcGlcXHByb2R1dG9zXFxbY29kaWdvXVxcaW1hZ2Vuc1xccm91dGUudHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgTmV4dFJlcXVlc3QsIE5leHRSZXNwb25zZSB9IGZyb20gJ25leHQvc2VydmVyJ1xyXG5pbXBvcnQgeyBwcm9taXNlcyBhcyBmcyB9IGZyb20gJ2ZzJ1xyXG5pbXBvcnQgcGF0aCBmcm9tICdwYXRoJ1xyXG5pbXBvcnQgc2hhcnAgZnJvbSAnc2hhcnAnXHJcblxyXG5jb25zdCBNQVhfSU1BR0VTID0gNFxyXG4vLyBTYWx2YSBkZW50cm8gZGUgcHVibGljL3VwbG9hZCBwYXJhIHNlcnZpciBlc3RhdGljYW1lbnRlIHZpYSAvdXBsb2FkLy4uLlxyXG5jb25zdCBVUExPQURfRElSID0gcGF0aC5qb2luKHByb2Nlc3MuY3dkKCksICdwdWJsaWMnLCAndXBsb2FkJylcclxuY29uc3QgTUFYX0ZJTEVfU0laRSA9IDEwICogMTAyNCAqIDEwMjQgLy8gMTBNQlxyXG5jb25zdCBBTExPV0VEX01JTUUgPSBbJ2ltYWdlL3BuZycsICdpbWFnZS9qcGVnJywgJ2ltYWdlL2pwZycsICdpbWFnZS93ZWJwJ11cclxuXHJcbmFzeW5jIGZ1bmN0aW9uIGVuc3VyZURpcigpIHtcclxuICBhd2FpdCBmcy5ta2RpcihVUExPQURfRElSLCB7IHJlY3Vyc2l2ZTogdHJ1ZSB9KVxyXG59XHJcblxyXG5mdW5jdGlvbiBidWlsZEZpbGVOYW1lKGNvZGlnbzogc3RyaW5nLCBwb3NpdGlvbjogbnVtYmVyKSB7XHJcbiAgcmV0dXJuIHBvc2l0aW9uID09PSAxID8gYCR7Y29kaWdvfS5wbmdgIDogYCR7Y29kaWdvfV8ke3Bvc2l0aW9ufS5wbmdgXHJcbn1cclxuZnVuY3Rpb24gYnVpbGRUaHVtYk5hbWUobWFpbjogc3RyaW5nKSB7XHJcbiAgcmV0dXJuIG1haW4ucmVwbGFjZSgvXFwucG5nJC9pLCAnX3RodW1iLnBuZycpXHJcbn1cclxuXHJcbmFzeW5jIGZ1bmN0aW9uIGxpc3RJbWFnZXMoY29kaWdvOiBzdHJpbmcpIHtcclxuICB0cnkge1xyXG4gICAgY29uc3QgZmlsZXMgPSBhd2FpdCBmcy5yZWFkZGlyKFVQTE9BRF9ESVIpXHJcbiAgICBjb25zdCBwcmVmaXggPSBgJHtjb2RpZ299YFxyXG4gICAgY29uc3QgZmlsdGVyZWQgPSBmaWxlc1xyXG4gICAgICAuZmlsdGVyKGYgPT4gZi5zdGFydHNXaXRoKHByZWZpeCkgJiYgZi5lbmRzV2l0aCgnLnBuZycpICYmICFmLmVuZHNXaXRoKCdfdGh1bWIucG5nJykpXHJcbiAgICAgIC5tYXAoZiA9PiB7XHJcbiAgICAgICAgY29uc3QgbSA9IGYubWF0Y2goL14oXFxkKykoPzpfKFxcZCspKT9cXC5wbmckLylcclxuICAgICAgICBjb25zdCBwb3MgPSBtICYmIG1bMl0gPyBwYXJzZUludChtWzJdLCAxMCkgOiAxXHJcbiAgICAgICAgcmV0dXJuIHsgZmlsZTogZiwgcG9zIH1cclxuICAgICAgfSlcclxuICAgICAgLnNvcnQoKGEsIGIpID0+IGEucG9zIC0gYi5wb3MpXHJcbiAgICByZXR1cm4gZmlsdGVyZWQubWFwKGkgPT4gKHsgbmFtZTogaS5maWxlLCB1cmw6IGAvdXBsb2FkLyR7aS5maWxlfWAsIHBvczogaS5wb3MgfSkpXHJcbiAgfSBjYXRjaCB7XHJcbiAgICByZXR1cm4gW11cclxuICB9XHJcbn1cclxuXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBHRVQoX3JlcTogTmV4dFJlcXVlc3QsIHsgcGFyYW1zIH06IHsgcGFyYW1zOiB7IGNvZGlnbzogc3RyaW5nIH0gfSkge1xyXG4gIGF3YWl0IGVuc3VyZURpcigpXHJcbiAgY29uc3QgaW1ncyA9IGF3YWl0IGxpc3RJbWFnZXMocGFyYW1zLmNvZGlnbylcclxuICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oeyBzdWNjZXNzOiB0cnVlLCBpbWFnZW5zOiBpbWdzIH0pXHJcbn1cclxuXHJcbi8vIFVwbG9hZCBub3ZhIGltYWdlbSAobXVsdGlwYXJ0L2Zvcm0tZGF0YSkgY2FtcG9zOiBmaWxlLCBjcm9wIChqc29uIG9wY2lvbmFsIGNvbSB7eCx5LHcsaCxzY2FsZX0pXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBQT1NUKHJlcTogTmV4dFJlcXVlc3QsIHsgcGFyYW1zIH06IHsgcGFyYW1zOiB7IGNvZGlnbzogc3RyaW5nIH0gfSkge1xyXG4gIGNvbnN0IGNvZGlnbyA9IHBhcmFtcy5jb2RpZ29cclxuICBhd2FpdCBlbnN1cmVEaXIoKVxyXG4gIHRyeSB7XHJcbiAgICBjb25zdCBmb3JtRGF0YSA9IGF3YWl0IHJlcS5mb3JtRGF0YSgpXHJcbiAgY29uc3QgZmlsZSA9IGZvcm1EYXRhLmdldCgnZmlsZScpIGFzIEZpbGUgfCBudWxsXHJcbiAgaWYgKCFmaWxlKSByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oeyBzdWNjZXNzOiBmYWxzZSwgZXJyb3I6ICdBcnF1aXZvIGF1c2VudGUnIH0sIHsgc3RhdHVzOiA0MDAgfSlcclxuICBpZiAoZmlsZS5zaXplID4gTUFYX0ZJTEVfU0laRSkgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKHsgc3VjY2VzczogZmFsc2UsIGVycm9yOiAnQXJxdWl2byBleGNlZGUgMTBNQicgfSwgeyBzdGF0dXM6IDQwMCB9KVxyXG4gIGlmICghQUxMT1dFRF9NSU1FLmluY2x1ZGVzKGZpbGUudHlwZSkpIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih7IHN1Y2Nlc3M6IGZhbHNlLCBlcnJvcjogJ0Zvcm1hdG8gaW52w6FsaWRvJyB9LCB7IHN0YXR1czogNDAwIH0pXHJcbiAgICBjb25zdCBjcm9wUmF3ID0gZm9ybURhdGEuZ2V0KCdjcm9wJykgYXMgc3RyaW5nIHwgbnVsbFxyXG4gICAgbGV0IGNyb3A6IGFueSA9IG51bGxcclxuICAgIGlmIChjcm9wUmF3KSB7XHJcbiAgICAgIHRyeSB7IGNyb3AgPSBKU09OLnBhcnNlKGNyb3BSYXcpIH0gY2F0Y2ggeyAvKiBpZ25vcmUgKi8gfVxyXG4gICAgfVxyXG4gICAgY29uc3QgYnVmZiA9IEJ1ZmZlci5mcm9tKGF3YWl0IGZpbGUuYXJyYXlCdWZmZXIoKSlcclxuXHJcbiAgICAvLyBEZXRlcm1pbmFyIHByw7N4aW1hIHBvc2nDp8Ojb1xyXG4gICAgY29uc3QgZXhpc3RpbmcgPSBhd2FpdCBsaXN0SW1hZ2VzKGNvZGlnbylcclxuICAgIGlmIChleGlzdGluZy5sZW5ndGggPj0gTUFYX0lNQUdFUykge1xyXG4gICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oeyBzdWNjZXNzOiBmYWxzZSwgZXJyb3I6ICdMaW1pdGUgbcOheGltbyBkZSA0IGltYWdlbnMnIH0sIHsgc3RhdHVzOiA0MDAgfSlcclxuICAgIH1cclxuICAgIGNvbnN0IG5leHRQb3MgPSBleGlzdGluZy5sZW5ndGggKyAxXHJcbiAgICBjb25zdCBmaWxlbmFtZSA9IGJ1aWxkRmlsZU5hbWUoY29kaWdvLCBuZXh0UG9zKVxyXG5cclxuICAgIGxldCBpbWcgPSBzaGFycChidWZmKVxyXG4gICAgY29uc3QgbWV0YSA9IGF3YWl0IGltZy5tZXRhZGF0YSgpXHJcbiAgICBpZiAoY3JvcCAmJiBjcm9wLncgJiYgY3JvcC5oKSB7XHJcbiAgICAgIGNvbnN0IHggPSBNYXRoLm1heCgwLCBNYXRoLm1pbihjcm9wLnggfHwgMCwgKG1ldGEud2lkdGggfHwgMCkpKVxyXG4gICAgICBjb25zdCB5ID0gTWF0aC5tYXgoMCwgTWF0aC5taW4oY3JvcC55IHx8IDAsIChtZXRhLmhlaWdodCB8fCAwKSkpXHJcbiAgICAgIGNvbnN0IHcgPSBNYXRoLm1pbihjcm9wLncsIChtZXRhLndpZHRoIHx8IGNyb3AudykpXHJcbiAgICAgIGNvbnN0IGggPSBNYXRoLm1pbihjcm9wLmgsIChtZXRhLmhlaWdodCB8fCBjcm9wLmgpKVxyXG4gICAgICBpbWcgPSBpbWcuZXh0cmFjdCh7IGxlZnQ6IE1hdGgucm91bmQoeCksIHRvcDogTWF0aC5yb3VuZCh5KSwgd2lkdGg6IE1hdGgucm91bmQodyksIGhlaWdodDogTWF0aC5yb3VuZChoKSB9KVxyXG4gICAgfVxyXG4gICAgaWYgKGNyb3AgJiYgY3JvcC5zY2FsZSAmJiBjcm9wLnNjYWxlICE9PSAxKSB7XHJcbiAgICAgIGltZyA9IGltZy5yZXNpemUoeyB3aWR0aDogTWF0aC5yb3VuZCgobWV0YS53aWR0aCB8fCAwKSAqIGNyb3Auc2NhbGUpIHx8IHVuZGVmaW5lZCB9KVxyXG4gICAgfVxyXG5cclxuICAgIGNvbnN0IG91dFBhdGggPSBwYXRoLmpvaW4oVVBMT0FEX0RJUiwgZmlsZW5hbWUpXHJcbiAgICBhd2FpdCBpbWcucG5nKHsgY29tcHJlc3Npb25MZXZlbDogOSB9KS50b0ZpbGUob3V0UGF0aClcclxuICAgIC8vIEdlcmFyIHRodW1ibmFpbCAzMDBweCAobWFudGVyIHByb3BvcsOnw6NvKSBzZSBtYWlvclxyXG4gICAgdHJ5IHtcclxuICAgICAgY29uc3QgdGh1bWJQYXRoID0gcGF0aC5qb2luKFVQTE9BRF9ESVIsIGJ1aWxkVGh1bWJOYW1lKGZpbGVuYW1lKSlcclxuICAgICAgYXdhaXQgc2hhcnAob3V0UGF0aCkucmVzaXplKHsgd2lkdGg6IDMwMCwgd2l0aG91dEVubGFyZ2VtZW50OiB0cnVlIH0pLnBuZyh7IGNvbXByZXNzaW9uTGV2ZWw6IDkgfSkudG9GaWxlKHRodW1iUGF0aClcclxuICAgIH0gY2F0Y2ggKGUpIHtcclxuICAgICAgY29uc29sZS53YXJuKCdGYWxoYSBnZXJhciB0aHVtYm5haWwnLCBlKVxyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih7IHN1Y2Nlc3M6IHRydWUsIGZpbGU6IGZpbGVuYW1lLCBwb3M6IG5leHRQb3MgfSlcclxuICB9IGNhdGNoIChlOiBhbnkpIHtcclxuICAgIGNvbnNvbGUuZXJyb3IoJ1VQTE9BRCBFUlJPJywgZSlcclxuICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih7IHN1Y2Nlc3M6IGZhbHNlLCBlcnJvcjogJ0ZhbGhhIHVwbG9hZCcsIGRldGFsaGU6IGUubWVzc2FnZSB9LCB7IHN0YXR1czogNTAwIH0pXHJcbiAgfVxyXG59XHJcblxyXG4vLyBSZW9yZGVuYXI6IGJvZHkgeyBvcmRlbTogW1wiMjAwLnBuZ1wiLFwiMjAwXzIucG5nXCIsIC4uLl0gfVxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gUFVUKHJlcTogTmV4dFJlcXVlc3QsIHsgcGFyYW1zIH06IHsgcGFyYW1zOiB7IGNvZGlnbzogc3RyaW5nIH0gfSkge1xyXG4gIGNvbnN0IGNvZGlnbyA9IHBhcmFtcy5jb2RpZ29cclxuICBhd2FpdCBlbnN1cmVEaXIoKVxyXG4gIHRyeSB7XHJcbiAgICBjb25zdCBib2R5ID0gYXdhaXQgcmVxLmpzb24oKVxyXG4gICAgY29uc3Qgb3JkZW06IHN0cmluZ1tdID0gYm9keT8ub3JkZW0gfHwgW11cclxuICAgIGlmICghQXJyYXkuaXNBcnJheShvcmRlbSkgfHwgIW9yZGVtLmxlbmd0aCkgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKHsgc3VjY2VzczogZmFsc2UsIGVycm9yOiAnTGlzdGEgdmF6aWEnIH0sIHsgc3RhdHVzOiA0MDAgfSlcclxuICAgIC8vIEZpbHRyYXIgc29tZW50ZSBkZXN0ZSBwcm9kdXRvXHJcbiAgICBjb25zdCB2YWxpZCA9IG9yZGVtLmZpbHRlcihuID0+IG4uc3RhcnRzV2l0aChjb2RpZ28pKVxyXG4gICAgLy8gRG9pcyBwYXNzb3MgcGFyYSBldml0YXIgc29icmVzY3JpdGE6IHByaW1laXJvIHJlbm9tZWFyIHBhcmEgdGVtcG9yw6FyaW8sIGRlcG9pcyBwYXJhIGRlc3Rpbm8gZmluYWxcclxuICAgIGludGVyZmFjZSBQYWlyIHsgdGVtcDogc3RyaW5nOyBmaW5hbDogc3RyaW5nOyBvcmlnaW5hbDogc3RyaW5nIH1cclxuICAgIGNvbnN0IHBhaXJzOiBQYWlyW10gPSBbXVxyXG4gICAgbGV0IHBvcyA9IDFcclxuICAgIGZvciAoY29uc3Qgb3JpZ2luYWwgb2YgdmFsaWQpIHtcclxuICAgICAgY29uc3QgZmluYWxOYW1lID0gYnVpbGRGaWxlTmFtZShjb2RpZ28sIHBvcylcclxuICAgICAgaWYgKG9yaWdpbmFsICE9PSBmaW5hbE5hbWUpIHtcclxuICAgICAgICBjb25zdCB0ZW1wTmFtZSA9IGAke29yaWdpbmFsfS5yZW9yZGVyX3RtcGAgLy8gZ2FyYW50aXIgdW5pY2lkYWRlXHJcbiAgICAgICAgLy8gcmVuYW1lIG9yaWdpbmFsIC0+IHRlbXBcclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgYXdhaXQgZnMucmVuYW1lKHBhdGguam9pbihVUExPQURfRElSLCBvcmlnaW5hbCksIHBhdGguam9pbihVUExPQURfRElSLCB0ZW1wTmFtZSkpXHJcbiAgICAgICAgICAvLyB0aHVtYm5haWwgdGVtcFxyXG4gICAgICAgICAgY29uc3Qgb3JpZ1RodW1iID0gcGF0aC5qb2luKFVQTE9BRF9ESVIsIGJ1aWxkVGh1bWJOYW1lKG9yaWdpbmFsKSlcclxuICAgICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgIGF3YWl0IGZzLnN0YXQob3JpZ1RodW1iKVxyXG4gICAgICAgICAgICBhd2FpdCBmcy5yZW5hbWUob3JpZ1RodW1iLCBwYXRoLmpvaW4oVVBMT0FEX0RJUiwgYnVpbGRUaHVtYk5hbWUodGVtcE5hbWUpKSlcclxuICAgICAgICAgIH0gY2F0Y2ggey8qIG5vIHRodW1iICovfVxyXG4gICAgICAgICAgcGFpcnMucHVzaCh7IHRlbXA6IHRlbXBOYW1lLCBmaW5hbDogZmluYWxOYW1lLCBvcmlnaW5hbCB9KVxyXG4gICAgICAgIH0gY2F0Y2ggKGUpIHtcclxuICAgICAgICAgIGNvbnNvbGUud2FybignZmFzZTEgcmVvcmRlciByZW5hbWUgZmFsaG91Jywgb3JpZ2luYWwsIGUpXHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICAgIHBvcysrXHJcbiAgICB9XHJcbiAgICAvLyBTZWd1bmRhIGZhc2U6IHRlbXAgLT4gZmluYWxcclxuICAgIGZvciAoY29uc3QgcCBvZiBwYWlycykge1xyXG4gICAgICB0cnkge1xyXG4gICAgICAgIGF3YWl0IGZzLnJlbmFtZShwYXRoLmpvaW4oVVBMT0FEX0RJUiwgcC50ZW1wKSwgcGF0aC5qb2luKFVQTE9BRF9ESVIsIHAuZmluYWwpKVxyXG4gICAgICAgIGNvbnN0IHRlbXBUaHVtYiA9IHBhdGguam9pbihVUExPQURfRElSLCBidWlsZFRodW1iTmFtZShwLnRlbXApKVxyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICBhd2FpdCBmcy5zdGF0KHRlbXBUaHVtYilcclxuICAgICAgICAgIGF3YWl0IGZzLnJlbmFtZSh0ZW1wVGh1bWIsIHBhdGguam9pbihVUExPQURfRElSLCBidWlsZFRodW1iTmFtZShwLmZpbmFsKSkpXHJcbiAgICAgICAgfSBjYXRjaCB7Lyogbm8gdGh1bWIgKi99XHJcbiAgICAgIH0gY2F0Y2ggKGUpIHtcclxuICAgICAgICBjb25zb2xlLndhcm4oJ2Zhc2UyIHJlb3JkZXIgcmVuYW1lIGZhbGhvdScsIHAsIGUpXHJcbiAgICAgIH1cclxuICAgIH1cclxuICAgIGNvbnN0IGltYWdlbnMgPSBhd2FpdCBsaXN0SW1hZ2VzKGNvZGlnbylcclxuICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih7IHN1Y2Nlc3M6IHRydWUsIGltYWdlbnMgfSlcclxuICB9IGNhdGNoIChlOiBhbnkpIHtcclxuICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih7IHN1Y2Nlc3M6IGZhbHNlLCBlcnJvcjogJ0ZhbGhhIHJlb3JkZXInLCBkZXRhbGhlOiBlLm1lc3NhZ2UgfSwgeyBzdGF0dXM6IDUwMCB9KVxyXG4gIH1cclxufVxyXG5cclxuLy8gREVMRVRFID9ub21lPTIwMF8yLnBuZ1xyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gREVMRVRFKHJlcTogTmV4dFJlcXVlc3QsIHsgcGFyYW1zIH06IHsgcGFyYW1zOiB7IGNvZGlnbzogc3RyaW5nIH0gfSkge1xyXG4gIGNvbnN0IGNvZGlnbyA9IHBhcmFtcy5jb2RpZ29cclxuICBhd2FpdCBlbnN1cmVEaXIoKVxyXG4gIGNvbnN0IHsgc2VhcmNoUGFyYW1zIH0gPSBuZXcgVVJMKHJlcS51cmwpXHJcbiAgY29uc3Qgbm9tZSA9IHNlYXJjaFBhcmFtcy5nZXQoJ25vbWUnKVxyXG4gIGlmICghbm9tZSkgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKHsgc3VjY2VzczogZmFsc2UsIGVycm9yOiAnUGFyYW0gbm9tZSBhdXNlbnRlJyB9LCB7IHN0YXR1czogNDAwIH0pXHJcbiAgaWYgKCFub21lLnN0YXJ0c1dpdGgoY29kaWdvKSkgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKHsgc3VjY2VzczogZmFsc2UsIGVycm9yOiAnQXJxdWl2byBuw6NvIHBlcnRlbmNlIGFvIHByb2R1dG8nIH0sIHsgc3RhdHVzOiA0MDAgfSlcclxuICB0cnkge1xyXG4gICAgYXdhaXQgZnMudW5saW5rKHBhdGguam9pbihVUExPQURfRElSLCBub21lKSlcclxuICAgIC8vIEFwYWdhciB0aHVtYm5haWwgYXNzb2NpYWRvXHJcbiAgICB0cnkgeyBhd2FpdCBmcy51bmxpbmsocGF0aC5qb2luKFVQTE9BRF9ESVIsIGJ1aWxkVGh1bWJOYW1lKG5vbWUpKSkgfSBjYXRjaCB7LyogaWdub3JlICovfVxyXG4gIH0gY2F0Y2ggKGUpIHtcclxuICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih7IHN1Y2Nlc3M6IGZhbHNlLCBlcnJvcjogJ0FycXVpdm8gbsOjbyBlbmNvbnRyYWRvJyB9LCB7IHN0YXR1czogNDA0IH0pXHJcbiAgfVxyXG4gIC8vIFJlY29tcGFjdGFyIG9yZGVtIHBhcmEgZXZpdGFyIGJ1cmFjb3NcclxuICBjb25zdCBpbWdzID0gYXdhaXQgbGlzdEltYWdlcyhjb2RpZ28pXHJcbiAgLy8gUmVub21lYXIgZW0gc2VxdcOqbmNpYVxyXG4gIC8vIENvbXBhY3Rhw6fDo28gc2VndXJhIHDDs3MgZXhjbHVzw6NvXHJcbiAgbGV0IHBvcyA9IDFcclxuICBjb25zdCBjb21wUGFpcnM6IHsgdGVtcDogc3RyaW5nOyBmaW5hbDogc3RyaW5nIH1bXSA9IFtdXHJcbiAgZm9yIChjb25zdCBpbWcgb2YgaW1ncykge1xyXG4gICAgY29uc3QgZmluYWxOYW1lID0gYnVpbGRGaWxlTmFtZShjb2RpZ28sIHBvcylcclxuICAgIGlmIChpbWcubmFtZSAhPT0gZmluYWxOYW1lKSB7XHJcbiAgICAgIGNvbnN0IHRlbXBOYW1lID0gYCR7aW1nLm5hbWV9LmNvbXBhY3RfdG1wYFxyXG4gICAgICB0cnkge1xyXG4gICAgICAgIGF3YWl0IGZzLnJlbmFtZShwYXRoLmpvaW4oVVBMT0FEX0RJUiwgaW1nLm5hbWUpLCBwYXRoLmpvaW4oVVBMT0FEX0RJUiwgdGVtcE5hbWUpKVxyXG4gICAgICAgIGNvbnN0IG9sZFRodW1iID0gcGF0aC5qb2luKFVQTE9BRF9ESVIsIGJ1aWxkVGh1bWJOYW1lKGltZy5uYW1lKSlcclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgYXdhaXQgZnMuc3RhdChvbGRUaHVtYilcclxuICAgICAgICAgIGF3YWl0IGZzLnJlbmFtZShvbGRUaHVtYiwgcGF0aC5qb2luKFVQTE9BRF9ESVIsIGJ1aWxkVGh1bWJOYW1lKHRlbXBOYW1lKSkpXHJcbiAgICAgICAgfSBjYXRjaCB7Lyogbm8gdGh1bWIgKi99XHJcbiAgICAgICAgY29tcFBhaXJzLnB1c2goeyB0ZW1wOiB0ZW1wTmFtZSwgZmluYWw6IGZpbmFsTmFtZSB9KVxyXG4gICAgICB9IGNhdGNoIChlKSB7IGNvbnNvbGUud2FybignY29tcGFjdCBmYXNlMSBmYWxob3UnLCBpbWcubmFtZSwgZSkgfVxyXG4gICAgfVxyXG4gICAgcG9zKytcclxuICB9XHJcbiAgZm9yIChjb25zdCBwIG9mIGNvbXBQYWlycykge1xyXG4gICAgdHJ5IHtcclxuICAgICAgYXdhaXQgZnMucmVuYW1lKHBhdGguam9pbihVUExPQURfRElSLCBwLnRlbXApLCBwYXRoLmpvaW4oVVBMT0FEX0RJUiwgcC5maW5hbCkpXHJcbiAgICAgIGNvbnN0IHRUaHVtYiA9IHBhdGguam9pbihVUExPQURfRElSLCBidWlsZFRodW1iTmFtZShwLnRlbXApKVxyXG4gICAgICB0cnkge1xyXG4gICAgICAgIGF3YWl0IGZzLnN0YXQodFRodW1iKVxyXG4gICAgICAgIGF3YWl0IGZzLnJlbmFtZSh0VGh1bWIsIHBhdGguam9pbihVUExPQURfRElSLCBidWlsZFRodW1iTmFtZShwLmZpbmFsKSkpXHJcbiAgICAgIH0gY2F0Y2ggey8qIG5vIHRodW1iICovfVxyXG4gICAgfSBjYXRjaCAoZSkgeyBjb25zb2xlLndhcm4oJ2NvbXBhY3QgZmFzZTIgZmFsaG91JywgcCwgZSkgfVxyXG4gIH1cclxuICBjb25zdCBmaW5hbExpc3QgPSBhd2FpdCBsaXN0SW1hZ2VzKGNvZGlnbylcclxuICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oeyBzdWNjZXNzOiB0cnVlLCBpbWFnZW5zOiBmaW5hbExpc3QgfSlcclxufVxyXG5cclxuZXhwb3J0IGNvbnN0IGR5bmFtaWMgPSAnZm9yY2UtZHluYW1pYydcclxuXHJcbi8vIFBBVENIOiBzd2FwIHBvc2l0aW9ucyB7IGFjYW86J3N3YXAnLCBmcm9tOiBudW1iZXIsIHRvOiBudW1iZXIgfVxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gUEFUQ0gocmVxOiBOZXh0UmVxdWVzdCwgeyBwYXJhbXMgfTogeyBwYXJhbXM6IHsgY29kaWdvOiBzdHJpbmcgfSB9KSB7XHJcbiAgY29uc3QgY29kaWdvID0gcGFyYW1zLmNvZGlnb1xyXG4gIGNvbnNvbGUubG9nKCfwn5SEIEFQSSBTV0FQIERFQlVHIC0gUmVjZWJlbmRvIFBBVENIIHBhcmEgY8OzZGlnbzonLCBjb2RpZ28pXHJcbiAgYXdhaXQgZW5zdXJlRGlyKClcclxuICB0cnkge1xyXG4gICAgY29uc3QgYm9keSA9IGF3YWl0IHJlcS5qc29uKClcclxuICAgIGNvbnNvbGUubG9nKCfwn5SEIEFQSSBTV0FQIERFQlVHIC0gQm9keSByZWNlYmlkbzonLCBib2R5KVxyXG4gICAgaWYgKGJvZHk/LmFjYW8gIT09ICdzd2FwJykgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKHsgc3VjY2VzczogZmFsc2UsIGVycm9yOiAnQcOnw6NvIGludsOhbGlkYScgfSwgeyBzdGF0dXM6IDQwMCB9KVxyXG4gICAgY29uc3QgZnJvbSA9IHBhcnNlSW50KGJvZHkuZnJvbSwgMTApXHJcbiAgICBjb25zdCB0byA9IHBhcnNlSW50KGJvZHkudG8sIDEwKVxyXG4gICAgY29uc29sZS5sb2coJ/CflIQgQVBJIFNXQVAgREVCVUcgLSBQb3Npw6fDtWVzOicsIHsgZnJvbSwgdG8gfSlcclxuICAgIGlmICghZnJvbSB8fCAhdG8gfHwgZnJvbSA9PT0gdG8pIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih7IHN1Y2Nlc3M6IGZhbHNlLCBlcnJvcjogJ1BhcsOibWV0cm9zIGludsOhbGlkb3MnIH0sIHsgc3RhdHVzOiA0MDAgfSlcclxuICAgIGlmIChmcm9tIDwgMSB8fCB0byA8IDEgfHwgZnJvbSA+IE1BWF9JTUFHRVMgfHwgdG8gPiBNQVhfSU1BR0VTKSByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oeyBzdWNjZXNzOiBmYWxzZSwgZXJyb3I6ICdGb3JhIGRvIGxpbWl0ZScgfSwgeyBzdGF0dXM6IDQwMCB9KVxyXG4gICAgY29uc3QgZmlsZUZyb20gPSBidWlsZEZpbGVOYW1lKGNvZGlnbywgZnJvbSlcclxuICAgIGNvbnN0IGZpbGVUbyA9IGJ1aWxkRmlsZU5hbWUoY29kaWdvLCB0bylcclxuICAgIGNvbnN0IHBhdGhGcm9tID0gcGF0aC5qb2luKFVQTE9BRF9ESVIsIGZpbGVGcm9tKVxyXG4gICAgY29uc3QgcGF0aFRvID0gcGF0aC5qb2luKFVQTE9BRF9ESVIsIGZpbGVUbylcclxuICAgIGNvbnNvbGUubG9nKCfwn5SEIEFQSSBTV0FQIERFQlVHIC0gQXJxdWl2b3M6JywgeyBmaWxlRnJvbSwgZmlsZVRvLCBwYXRoRnJvbSwgcGF0aFRvIH0pXHJcbiAgICAvLyBWZXJpZmljYXIgZXhpc3TDqm5jaWFcclxuICAgIHRyeSB7IFxyXG4gICAgICBhd2FpdCBmcy5zdGF0KHBhdGhGcm9tKSBcclxuICAgICAgY29uc29sZS5sb2coJ/CflIQgQVBJIFNXQVAgREVCVUcgLSBBcnF1aXZvIEZST00gZXhpc3RlJylcclxuICAgIH0gY2F0Y2ggeyBcclxuICAgICAgY29uc29sZS5sb2coJ+KdjCBBUEkgU1dBUCBERUJVRyAtIEFycXVpdm8gRlJPTSBuw6NvIGV4aXN0ZScpXHJcbiAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih7IHN1Y2Nlc3M6IGZhbHNlLCBlcnJvcjogJ09yaWdlbSBpbmV4aXN0ZW50ZScgfSwgeyBzdGF0dXM6IDQwNCB9KSBcclxuICAgIH1cclxuICAgIHRyeSB7IFxyXG4gICAgICBhd2FpdCBmcy5zdGF0KHBhdGhUbykgXHJcbiAgICAgIGNvbnNvbGUubG9nKCfwn5SEIEFQSSBTV0FQIERFQlVHIC0gQXJxdWl2byBUTyBleGlzdGUnKVxyXG4gICAgfSBjYXRjaCB7IFxyXG4gICAgICBjb25zb2xlLmxvZygn4p2MIEFQSSBTV0FQIERFQlVHIC0gQXJxdWl2byBUTyBuw6NvIGV4aXN0ZScpXHJcbiAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih7IHN1Y2Nlc3M6IGZhbHNlLCBlcnJvcjogJ0Rlc3Rpbm8gaW5leGlzdGVudGUnIH0sIHsgc3RhdHVzOiA0MDQgfSkgXHJcbiAgICB9XHJcbiAgICBjb25zdCB0ZW1wID0gYCR7ZmlsZUZyb219LnN3YXBfdG1wYFxyXG4gICAgY29uc3QgdGVtcFBhdGggPSBwYXRoLmpvaW4oVVBMT0FEX0RJUiwgdGVtcClcclxuICAgIGNvbnNvbGUubG9nKCfwn5SEIEFQSSBTV0FQIERFQlVHIC0gSW5pY2lhbmRvIHN3YXAgY29tIHRlbXA6JywgdGVtcClcclxuICAgIC8vIHN3YXAgcHJpbmNpcGFsXHJcbiAgICBhd2FpdCBmcy5yZW5hbWUocGF0aEZyb20sIHRlbXBQYXRoKVxyXG4gICAgYXdhaXQgZnMucmVuYW1lKHBhdGhUbywgcGF0aEZyb20pXHJcbiAgICBhd2FpdCBmcy5yZW5hbWUodGVtcFBhdGgsIHBhdGhUbylcclxuICAgIGNvbnNvbGUubG9nKCfinIUgQVBJIFNXQVAgREVCVUcgLSBTd2FwIHByaW5jaXBhbCBjb25jbHXDrWRvJylcclxuICAgIC8vIHN3YXAgdGh1bWJzIHNlIGV4aXN0aXJlbVxyXG4gICAgY29uc3QgdGh1bWJGcm9tID0gYnVpbGRUaHVtYk5hbWUoZmlsZUZyb20pXHJcbiAgICBjb25zdCB0aHVtYlRvID0gYnVpbGRUaHVtYk5hbWUoZmlsZVRvKVxyXG4gICAgY29uc3QgdGh1bWJGcm9tUGF0aCA9IHBhdGguam9pbihVUExPQURfRElSLCB0aHVtYkZyb20pXHJcbiAgICBjb25zdCB0aHVtYlRvUGF0aCA9IHBhdGguam9pbihVUExPQURfRElSLCB0aHVtYlRvKVxyXG4gICAgY29uc29sZS5sb2coJ/CflIQgQVBJIFNXQVAgREVCVUcgLSBUZW50YW5kbyBzd2FwIHRodW1iczonLCB7IHRodW1iRnJvbSwgdGh1bWJUbyB9KVxyXG4gICAgdHJ5IHtcclxuICAgICAgYXdhaXQgZnMuc3RhdCh0aHVtYkZyb21QYXRoKTsgYXdhaXQgZnMuc3RhdCh0aHVtYlRvUGF0aClcclxuICAgICAgY29uc3QgdGVtcFRodW1iID0gYCR7dGh1bWJGcm9tfS5zd2FwX3RtcGBcclxuICAgICAgYXdhaXQgZnMucmVuYW1lKHRodW1iRnJvbVBhdGgsIHBhdGguam9pbihVUExPQURfRElSLCB0ZW1wVGh1bWIpKVxyXG4gICAgICBhd2FpdCBmcy5yZW5hbWUodGh1bWJUb1BhdGgsIHRodW1iRnJvbVBhdGgpXHJcbiAgICAgIGF3YWl0IGZzLnJlbmFtZShwYXRoLmpvaW4oVVBMT0FEX0RJUiwgdGVtcFRodW1iKSwgdGh1bWJUb1BhdGgpXHJcbiAgICAgIGNvbnNvbGUubG9nKCfinIUgQVBJIFNXQVAgREVCVUcgLSBTd2FwIHRodW1icyBjb25jbHXDrWRvJylcclxuICAgIH0gY2F0Y2ggeyBcclxuICAgICAgY29uc29sZS5sb2coJ+KaoO+4jyBBUEkgU1dBUCBERUJVRyAtIFRodW1icyBuw6NvIGVuY29udHJhZG9zIG91IGVycm8gbm8gc3dhcCB0aHVtYnMnKVxyXG4gICAgfVxyXG4gICAgY29uc3QgaW1hZ2VucyA9IGF3YWl0IGxpc3RJbWFnZXMoY29kaWdvKVxyXG4gICAgY29uc29sZS5sb2coJ+KchSBBUEkgU1dBUCBERUJVRyAtIFN1Y2Nlc3MsIHJldG9ybmFuZG8gaW1hZ2VuczonLCBpbWFnZW5zKVxyXG4gICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKHsgc3VjY2VzczogdHJ1ZSwgaW1hZ2VucyB9KVxyXG4gIH0gY2F0Y2ggKGU6IGFueSkge1xyXG4gICAgY29uc29sZS5sb2coJ+KdjCBBUEkgU1dBUCBERUJVRyAtIEVycm86JywgZSlcclxuICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih7IHN1Y2Nlc3M6IGZhbHNlLCBlcnJvcjogJ0ZhbGhhIHN3YXAnLCBkZXRhbGhlOiBlLm1lc3NhZ2UgfSwgeyBzdGF0dXM6IDUwMCB9KVxyXG4gIH1cclxufSJdLCJuYW1lcyI6WyJOZXh0UmVzcG9uc2UiLCJwcm9taXNlcyIsImZzIiwicGF0aCIsInNoYXJwIiwiTUFYX0lNQUdFUyIsIlVQTE9BRF9ESVIiLCJqb2luIiwicHJvY2VzcyIsImN3ZCIsIk1BWF9GSUxFX1NJWkUiLCJBTExPV0VEX01JTUUiLCJlbnN1cmVEaXIiLCJta2RpciIsInJlY3Vyc2l2ZSIsImJ1aWxkRmlsZU5hbWUiLCJjb2RpZ28iLCJwb3NpdGlvbiIsImJ1aWxkVGh1bWJOYW1lIiwibWFpbiIsInJlcGxhY2UiLCJsaXN0SW1hZ2VzIiwiZmlsZXMiLCJyZWFkZGlyIiwicHJlZml4IiwiZmlsdGVyZWQiLCJmaWx0ZXIiLCJmIiwic3RhcnRzV2l0aCIsImVuZHNXaXRoIiwibWFwIiwibSIsIm1hdGNoIiwicG9zIiwicGFyc2VJbnQiLCJmaWxlIiwic29ydCIsImEiLCJiIiwiaSIsIm5hbWUiLCJ1cmwiLCJHRVQiLCJfcmVxIiwicGFyYW1zIiwiaW1ncyIsImpzb24iLCJzdWNjZXNzIiwiaW1hZ2VucyIsIlBPU1QiLCJyZXEiLCJmb3JtRGF0YSIsImdldCIsImVycm9yIiwic3RhdHVzIiwic2l6ZSIsImluY2x1ZGVzIiwidHlwZSIsImNyb3BSYXciLCJjcm9wIiwiSlNPTiIsInBhcnNlIiwiYnVmZiIsIkJ1ZmZlciIsImZyb20iLCJhcnJheUJ1ZmZlciIsImV4aXN0aW5nIiwibGVuZ3RoIiwibmV4dFBvcyIsImZpbGVuYW1lIiwiaW1nIiwibWV0YSIsIm1ldGFkYXRhIiwidyIsImgiLCJ4IiwiTWF0aCIsIm1heCIsIm1pbiIsIndpZHRoIiwieSIsImhlaWdodCIsImV4dHJhY3QiLCJsZWZ0Iiwicm91bmQiLCJ0b3AiLCJzY2FsZSIsInJlc2l6ZSIsInVuZGVmaW5lZCIsIm91dFBhdGgiLCJwbmciLCJjb21wcmVzc2lvbkxldmVsIiwidG9GaWxlIiwidGh1bWJQYXRoIiwid2l0aG91dEVubGFyZ2VtZW50IiwiZSIsImNvbnNvbGUiLCJ3YXJuIiwiZGV0YWxoZSIsIm1lc3NhZ2UiLCJQVVQiLCJib2R5Iiwib3JkZW0iLCJBcnJheSIsImlzQXJyYXkiLCJ2YWxpZCIsIm4iLCJwYWlycyIsIm9yaWdpbmFsIiwiZmluYWxOYW1lIiwidGVtcE5hbWUiLCJyZW5hbWUiLCJvcmlnVGh1bWIiLCJzdGF0IiwicHVzaCIsInRlbXAiLCJmaW5hbCIsInAiLCJ0ZW1wVGh1bWIiLCJERUxFVEUiLCJzZWFyY2hQYXJhbXMiLCJVUkwiLCJub21lIiwidW5saW5rIiwiY29tcFBhaXJzIiwib2xkVGh1bWIiLCJ0VGh1bWIiLCJmaW5hbExpc3QiLCJkeW5hbWljIiwiUEFUQ0giLCJsb2ciLCJhY2FvIiwidG8iLCJmaWxlRnJvbSIsImZpbGVUbyIsInBhdGhGcm9tIiwicGF0aFRvIiwidGVtcFBhdGgiLCJ0aHVtYkZyb20iLCJ0aHVtYlRvIiwidGh1bWJGcm9tUGF0aCIsInRodW1iVG9QYXRoIl0sImlnbm9yZUxpc3QiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./app/api/produtos/[codigo]/imagens/route.ts\n");

/***/ }),

/***/ "(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Fprodutos%2F%5Bcodigo%5D%2Fimagens%2Froute&page=%2Fapi%2Fprodutos%2F%5Bcodigo%5D%2Fimagens%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fprodutos%2F%5Bcodigo%5D%2Fimagens%2Froute.ts&appDir=C%3A%5CUsers%5Condyd%5CDocuments%5Cretaguarda_new%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5Condyd%5CDocuments%5Cretaguarda_new&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D&isGlobalNotFoundEnabled=!":
/*!****************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Fprodutos%2F%5Bcodigo%5D%2Fimagens%2Froute&page=%2Fapi%2Fprodutos%2F%5Bcodigo%5D%2Fimagens%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fprodutos%2F%5Bcodigo%5D%2Fimagens%2Froute.ts&appDir=C%3A%5CUsers%5Condyd%5CDocuments%5Cretaguarda_new%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5Condyd%5CDocuments%5Cretaguarda_new&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D&isGlobalNotFoundEnabled=! ***!
  \****************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   handler: () => (/* binding */ handler),\n/* harmony export */   patchFetch: () => (/* binding */ patchFetch),\n/* harmony export */   routeModule: () => (/* binding */ routeModule),\n/* harmony export */   serverHooks: () => (/* binding */ serverHooks),\n/* harmony export */   workAsyncStorage: () => (/* binding */ workAsyncStorage),\n/* harmony export */   workUnitAsyncStorage: () => (/* binding */ workUnitAsyncStorage)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/route-modules/app-route/module.compiled */ \"(rsc)/./node_modules/next/dist/server/route-modules/app-route/module.compiled.js\");\n/* harmony import */ var next_dist_server_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/route-kind */ \"(rsc)/./node_modules/next/dist/server/route-kind.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/server/lib/patch-fetch */ \"(rsc)/./node_modules/next/dist/server/lib/patch-fetch.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var next_dist_server_request_meta__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! next/dist/server/request-meta */ \"(rsc)/./node_modules/next/dist/server/request-meta.js\");\n/* harmony import */ var next_dist_server_request_meta__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_request_meta__WEBPACK_IMPORTED_MODULE_3__);\n/* harmony import */ var next_dist_server_lib_trace_tracer__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! next/dist/server/lib/trace/tracer */ \"(rsc)/./node_modules/next/dist/server/lib/trace/tracer.js\");\n/* harmony import */ var next_dist_server_lib_trace_tracer__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_lib_trace_tracer__WEBPACK_IMPORTED_MODULE_4__);\n/* harmony import */ var next_dist_shared_lib_router_utils_app_paths__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! next/dist/shared/lib/router/utils/app-paths */ \"next/dist/shared/lib/router/utils/app-paths\");\n/* harmony import */ var next_dist_shared_lib_router_utils_app_paths__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(next_dist_shared_lib_router_utils_app_paths__WEBPACK_IMPORTED_MODULE_5__);\n/* harmony import */ var next_dist_server_base_http_node__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! next/dist/server/base-http/node */ \"(rsc)/./node_modules/next/dist/server/base-http/node.js\");\n/* harmony import */ var next_dist_server_base_http_node__WEBPACK_IMPORTED_MODULE_6___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_base_http_node__WEBPACK_IMPORTED_MODULE_6__);\n/* harmony import */ var next_dist_server_web_spec_extension_adapters_next_request__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! next/dist/server/web/spec-extension/adapters/next-request */ \"(rsc)/./node_modules/next/dist/server/web/spec-extension/adapters/next-request.js\");\n/* harmony import */ var next_dist_server_web_spec_extension_adapters_next_request__WEBPACK_IMPORTED_MODULE_7___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_web_spec_extension_adapters_next_request__WEBPACK_IMPORTED_MODULE_7__);\n/* harmony import */ var next_dist_server_lib_trace_constants__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! next/dist/server/lib/trace/constants */ \"(rsc)/./node_modules/next/dist/server/lib/trace/constants.js\");\n/* harmony import */ var next_dist_server_lib_trace_constants__WEBPACK_IMPORTED_MODULE_8___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_lib_trace_constants__WEBPACK_IMPORTED_MODULE_8__);\n/* harmony import */ var next_dist_server_instrumentation_utils__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! next/dist/server/instrumentation/utils */ \"(rsc)/./node_modules/next/dist/server/instrumentation/utils.js\");\n/* harmony import */ var next_dist_server_send_response__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! next/dist/server/send-response */ \"(rsc)/./node_modules/next/dist/server/send-response.js\");\n/* harmony import */ var next_dist_server_web_utils__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! next/dist/server/web/utils */ \"(rsc)/./node_modules/next/dist/server/web/utils.js\");\n/* harmony import */ var next_dist_server_web_utils__WEBPACK_IMPORTED_MODULE_11___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_web_utils__WEBPACK_IMPORTED_MODULE_11__);\n/* harmony import */ var next_dist_server_lib_cache_control__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! next/dist/server/lib/cache-control */ \"(rsc)/./node_modules/next/dist/server/lib/cache-control.js\");\n/* harmony import */ var next_dist_lib_constants__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! next/dist/lib/constants */ \"(rsc)/./node_modules/next/dist/lib/constants.js\");\n/* harmony import */ var next_dist_lib_constants__WEBPACK_IMPORTED_MODULE_13___default = /*#__PURE__*/__webpack_require__.n(next_dist_lib_constants__WEBPACK_IMPORTED_MODULE_13__);\n/* harmony import */ var next_dist_shared_lib_no_fallback_error_external__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! next/dist/shared/lib/no-fallback-error.external */ \"next/dist/shared/lib/no-fallback-error.external\");\n/* harmony import */ var next_dist_shared_lib_no_fallback_error_external__WEBPACK_IMPORTED_MODULE_14___default = /*#__PURE__*/__webpack_require__.n(next_dist_shared_lib_no_fallback_error_external__WEBPACK_IMPORTED_MODULE_14__);\n/* harmony import */ var next_dist_server_response_cache__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! next/dist/server/response-cache */ \"(rsc)/./node_modules/next/dist/server/response-cache/index.js\");\n/* harmony import */ var next_dist_server_response_cache__WEBPACK_IMPORTED_MODULE_15___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_response_cache__WEBPACK_IMPORTED_MODULE_15__);\n/* harmony import */ var C_Users_ondyd_Documents_retaguarda_new_app_api_produtos_codigo_imagens_route_ts__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! ./app/api/produtos/[codigo]/imagens/route.ts */ \"(rsc)/./app/api/produtos/[codigo]/imagens/route.ts\");\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n// We inject the nextConfigOutput here so that we can use them in the route\n// module.\nconst nextConfigOutput = \"\"\nconst routeModule = new next_dist_server_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__.AppRouteRouteModule({\n    definition: {\n        kind: next_dist_server_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.APP_ROUTE,\n        page: \"/api/produtos/[codigo]/imagens/route\",\n        pathname: \"/api/produtos/[codigo]/imagens\",\n        filename: \"route\",\n        bundlePath: \"app/api/produtos/[codigo]/imagens/route\"\n    },\n    distDir: \".next\" || 0,\n    relativeProjectDir:  false || '',\n    resolvedPagePath: \"C:\\\\Users\\\\ondyd\\\\Documents\\\\retaguarda_new\\\\app\\\\api\\\\produtos\\\\[codigo]\\\\imagens\\\\route.ts\",\n    nextConfigOutput,\n    userland: C_Users_ondyd_Documents_retaguarda_new_app_api_produtos_codigo_imagens_route_ts__WEBPACK_IMPORTED_MODULE_16__\n});\n// Pull out the exports that we need to expose from the module. This should\n// be eliminated when we've moved the other routes to the new format. These\n// are used to hook into the route.\nconst { workAsyncStorage, workUnitAsyncStorage, serverHooks } = routeModule;\nfunction patchFetch() {\n    return (0,next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__.patchFetch)({\n        workAsyncStorage,\n        workUnitAsyncStorage\n    });\n}\n\nasync function handler(req, res, ctx) {\n    var _nextConfig_experimental;\n    let srcPage = \"/api/produtos/[codigo]/imagens/route\";\n    // turbopack doesn't normalize `/index` in the page name\n    // so we need to to process dynamic routes properly\n    // TODO: fix turbopack providing differing value from webpack\n    if (false) {} else if (srcPage === '/index') {\n        // we always normalize /index specifically\n        srcPage = '/';\n    }\n    const multiZoneDraftMode = false;\n    const prepareResult = await routeModule.prepare(req, res, {\n        srcPage,\n        multiZoneDraftMode\n    });\n    if (!prepareResult) {\n        res.statusCode = 400;\n        res.end('Bad Request');\n        ctx.waitUntil == null ? void 0 : ctx.waitUntil.call(ctx, Promise.resolve());\n        return null;\n    }\n    const { buildId, params, nextConfig, isDraftMode, prerenderManifest, routerServerContext, isOnDemandRevalidate, revalidateOnlyGenerated, resolvedPathname } = prepareResult;\n    const normalizedSrcPage = (0,next_dist_shared_lib_router_utils_app_paths__WEBPACK_IMPORTED_MODULE_5__.normalizeAppPath)(srcPage);\n    let isIsr = Boolean(prerenderManifest.dynamicRoutes[normalizedSrcPage] || prerenderManifest.routes[resolvedPathname]);\n    if (isIsr && !isDraftMode) {\n        const isPrerendered = Boolean(prerenderManifest.routes[resolvedPathname]);\n        const prerenderInfo = prerenderManifest.dynamicRoutes[normalizedSrcPage];\n        if (prerenderInfo) {\n            if (prerenderInfo.fallback === false && !isPrerendered) {\n                throw new next_dist_shared_lib_no_fallback_error_external__WEBPACK_IMPORTED_MODULE_14__.NoFallbackError();\n            }\n        }\n    }\n    let cacheKey = null;\n    if (isIsr && !routeModule.isDev && !isDraftMode) {\n        cacheKey = resolvedPathname;\n        // ensure /index and / is normalized to one key\n        cacheKey = cacheKey === '/index' ? '/' : cacheKey;\n    }\n    const supportsDynamicResponse = // If we're in development, we always support dynamic HTML\n    routeModule.isDev === true || // If this is not SSG or does not have static paths, then it supports\n    // dynamic HTML.\n    !isIsr;\n    // This is a revalidation request if the request is for a static\n    // page and it is not being resumed from a postponed render and\n    // it is not a dynamic RSC request then it is a revalidation\n    // request.\n    const isRevalidate = isIsr && !supportsDynamicResponse;\n    const method = req.method || 'GET';\n    const tracer = (0,next_dist_server_lib_trace_tracer__WEBPACK_IMPORTED_MODULE_4__.getTracer)();\n    const activeSpan = tracer.getActiveScopeSpan();\n    const context = {\n        params,\n        prerenderManifest,\n        renderOpts: {\n            experimental: {\n                cacheComponents: Boolean(nextConfig.experimental.cacheComponents),\n                authInterrupts: Boolean(nextConfig.experimental.authInterrupts)\n            },\n            supportsDynamicResponse,\n            incrementalCache: (0,next_dist_server_request_meta__WEBPACK_IMPORTED_MODULE_3__.getRequestMeta)(req, 'incrementalCache'),\n            cacheLifeProfiles: (_nextConfig_experimental = nextConfig.experimental) == null ? void 0 : _nextConfig_experimental.cacheLife,\n            isRevalidate,\n            waitUntil: ctx.waitUntil,\n            onClose: (cb)=>{\n                res.on('close', cb);\n            },\n            onAfterTaskError: undefined,\n            onInstrumentationRequestError: (error, _request, errorContext)=>routeModule.onRequestError(req, error, errorContext, routerServerContext)\n        },\n        sharedContext: {\n            buildId\n        }\n    };\n    const nodeNextReq = new next_dist_server_base_http_node__WEBPACK_IMPORTED_MODULE_6__.NodeNextRequest(req);\n    const nodeNextRes = new next_dist_server_base_http_node__WEBPACK_IMPORTED_MODULE_6__.NodeNextResponse(res);\n    const nextReq = next_dist_server_web_spec_extension_adapters_next_request__WEBPACK_IMPORTED_MODULE_7__.NextRequestAdapter.fromNodeNextRequest(nodeNextReq, (0,next_dist_server_web_spec_extension_adapters_next_request__WEBPACK_IMPORTED_MODULE_7__.signalFromNodeResponse)(res));\n    try {\n        const invokeRouteModule = async (span)=>{\n            return routeModule.handle(nextReq, context).finally(()=>{\n                if (!span) return;\n                span.setAttributes({\n                    'http.status_code': res.statusCode,\n                    'next.rsc': false\n                });\n                const rootSpanAttributes = tracer.getRootSpanAttributes();\n                // We were unable to get attributes, probably OTEL is not enabled\n                if (!rootSpanAttributes) {\n                    return;\n                }\n                if (rootSpanAttributes.get('next.span_type') !== next_dist_server_lib_trace_constants__WEBPACK_IMPORTED_MODULE_8__.BaseServerSpan.handleRequest) {\n                    console.warn(`Unexpected root span type '${rootSpanAttributes.get('next.span_type')}'. Please report this Next.js issue https://github.com/vercel/next.js`);\n                    return;\n                }\n                const route = rootSpanAttributes.get('next.route');\n                if (route) {\n                    const name = `${method} ${route}`;\n                    span.setAttributes({\n                        'next.route': route,\n                        'http.route': route,\n                        'next.span_name': name\n                    });\n                    span.updateName(name);\n                } else {\n                    span.updateName(`${method} ${req.url}`);\n                }\n            });\n        };\n        const handleResponse = async (currentSpan)=>{\n            var _cacheEntry_value;\n            const responseGenerator = async ({ previousCacheEntry })=>{\n                try {\n                    if (!(0,next_dist_server_request_meta__WEBPACK_IMPORTED_MODULE_3__.getRequestMeta)(req, 'minimalMode') && isOnDemandRevalidate && revalidateOnlyGenerated && !previousCacheEntry) {\n                        res.statusCode = 404;\n                        // on-demand revalidate always sets this header\n                        res.setHeader('x-nextjs-cache', 'REVALIDATED');\n                        res.end('This page could not be found');\n                        return null;\n                    }\n                    const response = await invokeRouteModule(currentSpan);\n                    req.fetchMetrics = context.renderOpts.fetchMetrics;\n                    let pendingWaitUntil = context.renderOpts.pendingWaitUntil;\n                    // Attempt using provided waitUntil if available\n                    // if it's not we fallback to sendResponse's handling\n                    if (pendingWaitUntil) {\n                        if (ctx.waitUntil) {\n                            ctx.waitUntil(pendingWaitUntil);\n                            pendingWaitUntil = undefined;\n                        }\n                    }\n                    const cacheTags = context.renderOpts.collectedTags;\n                    // If the request is for a static response, we can cache it so long\n                    // as it's not edge.\n                    if (isIsr) {\n                        const blob = await response.blob();\n                        // Copy the headers from the response.\n                        const headers = (0,next_dist_server_web_utils__WEBPACK_IMPORTED_MODULE_11__.toNodeOutgoingHttpHeaders)(response.headers);\n                        if (cacheTags) {\n                            headers[next_dist_lib_constants__WEBPACK_IMPORTED_MODULE_13__.NEXT_CACHE_TAGS_HEADER] = cacheTags;\n                        }\n                        if (!headers['content-type'] && blob.type) {\n                            headers['content-type'] = blob.type;\n                        }\n                        const revalidate = typeof context.renderOpts.collectedRevalidate === 'undefined' || context.renderOpts.collectedRevalidate >= next_dist_lib_constants__WEBPACK_IMPORTED_MODULE_13__.INFINITE_CACHE ? false : context.renderOpts.collectedRevalidate;\n                        const expire = typeof context.renderOpts.collectedExpire === 'undefined' || context.renderOpts.collectedExpire >= next_dist_lib_constants__WEBPACK_IMPORTED_MODULE_13__.INFINITE_CACHE ? undefined : context.renderOpts.collectedExpire;\n                        // Create the cache entry for the response.\n                        const cacheEntry = {\n                            value: {\n                                kind: next_dist_server_response_cache__WEBPACK_IMPORTED_MODULE_15__.CachedRouteKind.APP_ROUTE,\n                                status: response.status,\n                                body: Buffer.from(await blob.arrayBuffer()),\n                                headers\n                            },\n                            cacheControl: {\n                                revalidate,\n                                expire\n                            }\n                        };\n                        return cacheEntry;\n                    } else {\n                        // send response without caching if not ISR\n                        await (0,next_dist_server_send_response__WEBPACK_IMPORTED_MODULE_10__.sendResponse)(nodeNextReq, nodeNextRes, response, context.renderOpts.pendingWaitUntil);\n                        return null;\n                    }\n                } catch (err) {\n                    // if this is a background revalidate we need to report\n                    // the request error here as it won't be bubbled\n                    if (previousCacheEntry == null ? void 0 : previousCacheEntry.isStale) {\n                        await routeModule.onRequestError(req, err, {\n                            routerKind: 'App Router',\n                            routePath: srcPage,\n                            routeType: 'route',\n                            revalidateReason: (0,next_dist_server_instrumentation_utils__WEBPACK_IMPORTED_MODULE_9__.getRevalidateReason)({\n                                isRevalidate,\n                                isOnDemandRevalidate\n                            })\n                        }, routerServerContext);\n                    }\n                    throw err;\n                }\n            };\n            const cacheEntry = await routeModule.handleResponse({\n                req,\n                nextConfig,\n                cacheKey,\n                routeKind: next_dist_server_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.APP_ROUTE,\n                isFallback: false,\n                prerenderManifest,\n                isRoutePPREnabled: false,\n                isOnDemandRevalidate,\n                revalidateOnlyGenerated,\n                responseGenerator,\n                waitUntil: ctx.waitUntil\n            });\n            // we don't create a cacheEntry for ISR\n            if (!isIsr) {\n                return null;\n            }\n            if ((cacheEntry == null ? void 0 : (_cacheEntry_value = cacheEntry.value) == null ? void 0 : _cacheEntry_value.kind) !== next_dist_server_response_cache__WEBPACK_IMPORTED_MODULE_15__.CachedRouteKind.APP_ROUTE) {\n                var _cacheEntry_value1;\n                throw Object.defineProperty(new Error(`Invariant: app-route received invalid cache entry ${cacheEntry == null ? void 0 : (_cacheEntry_value1 = cacheEntry.value) == null ? void 0 : _cacheEntry_value1.kind}`), \"__NEXT_ERROR_CODE\", {\n                    value: \"E701\",\n                    enumerable: false,\n                    configurable: true\n                });\n            }\n            if (!(0,next_dist_server_request_meta__WEBPACK_IMPORTED_MODULE_3__.getRequestMeta)(req, 'minimalMode')) {\n                res.setHeader('x-nextjs-cache', isOnDemandRevalidate ? 'REVALIDATED' : cacheEntry.isMiss ? 'MISS' : cacheEntry.isStale ? 'STALE' : 'HIT');\n            }\n            // Draft mode should never be cached\n            if (isDraftMode) {\n                res.setHeader('Cache-Control', 'private, no-cache, no-store, max-age=0, must-revalidate');\n            }\n            const headers = (0,next_dist_server_web_utils__WEBPACK_IMPORTED_MODULE_11__.fromNodeOutgoingHttpHeaders)(cacheEntry.value.headers);\n            if (!((0,next_dist_server_request_meta__WEBPACK_IMPORTED_MODULE_3__.getRequestMeta)(req, 'minimalMode') && isIsr)) {\n                headers.delete(next_dist_lib_constants__WEBPACK_IMPORTED_MODULE_13__.NEXT_CACHE_TAGS_HEADER);\n            }\n            // If cache control is already set on the response we don't\n            // override it to allow users to customize it via next.config\n            if (cacheEntry.cacheControl && !res.getHeader('Cache-Control') && !headers.get('Cache-Control')) {\n                headers.set('Cache-Control', (0,next_dist_server_lib_cache_control__WEBPACK_IMPORTED_MODULE_12__.getCacheControlHeader)(cacheEntry.cacheControl));\n            }\n            await (0,next_dist_server_send_response__WEBPACK_IMPORTED_MODULE_10__.sendResponse)(nodeNextReq, nodeNextRes, new Response(cacheEntry.value.body, {\n                headers,\n                status: cacheEntry.value.status || 200\n            }));\n            return null;\n        };\n        // TODO: activeSpan code path is for when wrapped by\n        // next-server can be removed when this is no longer used\n        if (activeSpan) {\n            await handleResponse(activeSpan);\n        } else {\n            await tracer.withPropagatedContext(req.headers, ()=>tracer.trace(next_dist_server_lib_trace_constants__WEBPACK_IMPORTED_MODULE_8__.BaseServerSpan.handleRequest, {\n                    spanName: `${method} ${req.url}`,\n                    kind: next_dist_server_lib_trace_tracer__WEBPACK_IMPORTED_MODULE_4__.SpanKind.SERVER,\n                    attributes: {\n                        'http.method': method,\n                        'http.target': req.url\n                    }\n                }, handleResponse));\n        }\n    } catch (err) {\n        // if we aren't wrapped by base-server handle here\n        if (!activeSpan && !(err instanceof next_dist_shared_lib_no_fallback_error_external__WEBPACK_IMPORTED_MODULE_14__.NoFallbackError)) {\n            await routeModule.onRequestError(req, err, {\n                routerKind: 'App Router',\n                routePath: normalizedSrcPage,\n                routeType: 'route',\n                revalidateReason: (0,next_dist_server_instrumentation_utils__WEBPACK_IMPORTED_MODULE_9__.getRevalidateReason)({\n                    isRevalidate,\n                    isOnDemandRevalidate\n                })\n            });\n        }\n        // rethrow so that we can handle serving error page\n        // If this is during static generation, throw the error again.\n        if (isIsr) throw err;\n        // Otherwise, send a 500 response.\n        await (0,next_dist_server_send_response__WEBPACK_IMPORTED_MODULE_10__.sendResponse)(nodeNextReq, nodeNextRes, new Response(null, {\n            status: 500\n        }));\n        return null;\n    }\n}\n\n//# sourceMappingURL=app-route.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LWFwcC1sb2FkZXIvaW5kZXguanM/bmFtZT1hcHAlMkZhcGklMkZwcm9kdXRvcyUyRiU1QmNvZGlnbyU1RCUyRmltYWdlbnMlMkZyb3V0ZSZwYWdlPSUyRmFwaSUyRnByb2R1dG9zJTJGJTVCY29kaWdvJTVEJTJGaW1hZ2VucyUyRnJvdXRlJmFwcFBhdGhzPSZwYWdlUGF0aD1wcml2YXRlLW5leHQtYXBwLWRpciUyRmFwaSUyRnByb2R1dG9zJTJGJTVCY29kaWdvJTVEJTJGaW1hZ2VucyUyRnJvdXRlLnRzJmFwcERpcj1DJTNBJTVDVXNlcnMlNUNvbmR5ZCU1Q0RvY3VtZW50cyU1Q3JldGFndWFyZGFfbmV3JTVDYXBwJnBhZ2VFeHRlbnNpb25zPXRzeCZwYWdlRXh0ZW5zaW9ucz10cyZwYWdlRXh0ZW5zaW9ucz1qc3gmcGFnZUV4dGVuc2lvbnM9anMmcm9vdERpcj1DJTNBJTVDVXNlcnMlNUNvbmR5ZCU1Q0RvY3VtZW50cyU1Q3JldGFndWFyZGFfbmV3JmlzRGV2PXRydWUmdHNjb25maWdQYXRoPXRzY29uZmlnLmpzb24mYmFzZVBhdGg9JmFzc2V0UHJlZml4PSZuZXh0Q29uZmlnT3V0cHV0PSZwcmVmZXJyZWRSZWdpb249Jm1pZGRsZXdhcmVDb25maWc9ZTMwJTNEJmlzR2xvYmFsTm90Rm91bmRFbmFibGVkPSEiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBK0Y7QUFDdkM7QUFDcUI7QUFDZDtBQUNTO0FBQ087QUFDSztBQUNtQztBQUNqRDtBQUNPO0FBQ2Y7QUFDc0M7QUFDekI7QUFDTTtBQUNDO0FBQ2hCO0FBQ3VEO0FBQ3pIO0FBQ0E7QUFDQTtBQUNBLHdCQUF3Qix5R0FBbUI7QUFDM0M7QUFDQSxjQUFjLGtFQUFTO0FBQ3ZCO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMLGFBQWEsT0FBb0MsSUFB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QUFDckQ7QUFDQTtBQUNBO0FBQ0E7QUFDQSw2Q0FBNkMsMEZBQXFCO0FBQ2xFO0FBQ0Esa0JBQWtCLDZFQUFZO0FBQzlCO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsVUFBVTtBQUNWLDZFQUE2RSxnRkFBYztBQUMzRixpQ0FBaUMsUUFBUSxFQUFFLFFBQVE7QUFDbkQsMEJBQTBCLHVFQUFRO0FBQ2xDO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCO0FBQ2pCO0FBQ0EsTUFBTTtBQUNOO0FBQ0EsNENBQTRDLDZGQUFlO0FBQzNEO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0NBQWtDLDJGQUFtQjtBQUNyRDtBQUNBO0FBQ0EsaUJBQWlCO0FBQ2pCLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsY0FBYyw2RUFBWTtBQUMxQjtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7O0FBRUEiLCJzb3VyY2VzIjpbIiJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBBcHBSb3V0ZVJvdXRlTW9kdWxlIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvcm91dGUtbW9kdWxlcy9hcHAtcm91dGUvbW9kdWxlLmNvbXBpbGVkXCI7XG5pbXBvcnQgeyBSb3V0ZUtpbmQgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9yb3V0ZS1raW5kXCI7XG5pbXBvcnQgeyBwYXRjaEZldGNoIGFzIF9wYXRjaEZldGNoIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvbGliL3BhdGNoLWZldGNoXCI7XG5pbXBvcnQgeyBnZXRSZXF1ZXN0TWV0YSB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL3JlcXVlc3QtbWV0YVwiO1xuaW1wb3J0IHsgZ2V0VHJhY2VyLCBTcGFuS2luZCB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2xpYi90cmFjZS90cmFjZXJcIjtcbmltcG9ydCB7IG5vcm1hbGl6ZUFwcFBhdGggfSBmcm9tIFwibmV4dC9kaXN0L3NoYXJlZC9saWIvcm91dGVyL3V0aWxzL2FwcC1wYXRoc1wiO1xuaW1wb3J0IHsgTm9kZU5leHRSZXF1ZXN0LCBOb2RlTmV4dFJlc3BvbnNlIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvYmFzZS1odHRwL25vZGVcIjtcbmltcG9ydCB7IE5leHRSZXF1ZXN0QWRhcHRlciwgc2lnbmFsRnJvbU5vZGVSZXNwb25zZSB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL3dlYi9zcGVjLWV4dGVuc2lvbi9hZGFwdGVycy9uZXh0LXJlcXVlc3RcIjtcbmltcG9ydCB7IEJhc2VTZXJ2ZXJTcGFuIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvbGliL3RyYWNlL2NvbnN0YW50c1wiO1xuaW1wb3J0IHsgZ2V0UmV2YWxpZGF0ZVJlYXNvbiB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2luc3RydW1lbnRhdGlvbi91dGlsc1wiO1xuaW1wb3J0IHsgc2VuZFJlc3BvbnNlIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvc2VuZC1yZXNwb25zZVwiO1xuaW1wb3J0IHsgZnJvbU5vZGVPdXRnb2luZ0h0dHBIZWFkZXJzLCB0b05vZGVPdXRnb2luZ0h0dHBIZWFkZXJzIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvd2ViL3V0aWxzXCI7XG5pbXBvcnQgeyBnZXRDYWNoZUNvbnRyb2xIZWFkZXIgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9saWIvY2FjaGUtY29udHJvbFwiO1xuaW1wb3J0IHsgSU5GSU5JVEVfQ0FDSEUsIE5FWFRfQ0FDSEVfVEFHU19IRUFERVIgfSBmcm9tIFwibmV4dC9kaXN0L2xpYi9jb25zdGFudHNcIjtcbmltcG9ydCB7IE5vRmFsbGJhY2tFcnJvciB9IGZyb20gXCJuZXh0L2Rpc3Qvc2hhcmVkL2xpYi9uby1mYWxsYmFjay1lcnJvci5leHRlcm5hbFwiO1xuaW1wb3J0IHsgQ2FjaGVkUm91dGVLaW5kIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvcmVzcG9uc2UtY2FjaGVcIjtcbmltcG9ydCAqIGFzIHVzZXJsYW5kIGZyb20gXCJDOlxcXFxVc2Vyc1xcXFxvbmR5ZFxcXFxEb2N1bWVudHNcXFxccmV0YWd1YXJkYV9uZXdcXFxcYXBwXFxcXGFwaVxcXFxwcm9kdXRvc1xcXFxbY29kaWdvXVxcXFxpbWFnZW5zXFxcXHJvdXRlLnRzXCI7XG4vLyBXZSBpbmplY3QgdGhlIG5leHRDb25maWdPdXRwdXQgaGVyZSBzbyB0aGF0IHdlIGNhbiB1c2UgdGhlbSBpbiB0aGUgcm91dGVcbi8vIG1vZHVsZS5cbmNvbnN0IG5leHRDb25maWdPdXRwdXQgPSBcIlwiXG5jb25zdCByb3V0ZU1vZHVsZSA9IG5ldyBBcHBSb3V0ZVJvdXRlTW9kdWxlKHtcbiAgICBkZWZpbml0aW9uOiB7XG4gICAgICAgIGtpbmQ6IFJvdXRlS2luZC5BUFBfUk9VVEUsXG4gICAgICAgIHBhZ2U6IFwiL2FwaS9wcm9kdXRvcy9bY29kaWdvXS9pbWFnZW5zL3JvdXRlXCIsXG4gICAgICAgIHBhdGhuYW1lOiBcIi9hcGkvcHJvZHV0b3MvW2NvZGlnb10vaW1hZ2Vuc1wiLFxuICAgICAgICBmaWxlbmFtZTogXCJyb3V0ZVwiLFxuICAgICAgICBidW5kbGVQYXRoOiBcImFwcC9hcGkvcHJvZHV0b3MvW2NvZGlnb10vaW1hZ2Vucy9yb3V0ZVwiXG4gICAgfSxcbiAgICBkaXN0RGlyOiBwcm9jZXNzLmVudi5fX05FWFRfUkVMQVRJVkVfRElTVF9ESVIgfHwgJycsXG4gICAgcmVsYXRpdmVQcm9qZWN0RGlyOiBwcm9jZXNzLmVudi5fX05FWFRfUkVMQVRJVkVfUFJPSkVDVF9ESVIgfHwgJycsXG4gICAgcmVzb2x2ZWRQYWdlUGF0aDogXCJDOlxcXFxVc2Vyc1xcXFxvbmR5ZFxcXFxEb2N1bWVudHNcXFxccmV0YWd1YXJkYV9uZXdcXFxcYXBwXFxcXGFwaVxcXFxwcm9kdXRvc1xcXFxbY29kaWdvXVxcXFxpbWFnZW5zXFxcXHJvdXRlLnRzXCIsXG4gICAgbmV4dENvbmZpZ091dHB1dCxcbiAgICB1c2VybGFuZFxufSk7XG4vLyBQdWxsIG91dCB0aGUgZXhwb3J0cyB0aGF0IHdlIG5lZWQgdG8gZXhwb3NlIGZyb20gdGhlIG1vZHVsZS4gVGhpcyBzaG91bGRcbi8vIGJlIGVsaW1pbmF0ZWQgd2hlbiB3ZSd2ZSBtb3ZlZCB0aGUgb3RoZXIgcm91dGVzIHRvIHRoZSBuZXcgZm9ybWF0LiBUaGVzZVxuLy8gYXJlIHVzZWQgdG8gaG9vayBpbnRvIHRoZSByb3V0ZS5cbmNvbnN0IHsgd29ya0FzeW5jU3RvcmFnZSwgd29ya1VuaXRBc3luY1N0b3JhZ2UsIHNlcnZlckhvb2tzIH0gPSByb3V0ZU1vZHVsZTtcbmZ1bmN0aW9uIHBhdGNoRmV0Y2goKSB7XG4gICAgcmV0dXJuIF9wYXRjaEZldGNoKHtcbiAgICAgICAgd29ya0FzeW5jU3RvcmFnZSxcbiAgICAgICAgd29ya1VuaXRBc3luY1N0b3JhZ2VcbiAgICB9KTtcbn1cbmV4cG9ydCB7IHJvdXRlTW9kdWxlLCB3b3JrQXN5bmNTdG9yYWdlLCB3b3JrVW5pdEFzeW5jU3RvcmFnZSwgc2VydmVySG9va3MsIHBhdGNoRmV0Y2gsICB9O1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGhhbmRsZXIocmVxLCByZXMsIGN0eCkge1xuICAgIHZhciBfbmV4dENvbmZpZ19leHBlcmltZW50YWw7XG4gICAgbGV0IHNyY1BhZ2UgPSBcIi9hcGkvcHJvZHV0b3MvW2NvZGlnb10vaW1hZ2Vucy9yb3V0ZVwiO1xuICAgIC8vIHR1cmJvcGFjayBkb2Vzbid0IG5vcm1hbGl6ZSBgL2luZGV4YCBpbiB0aGUgcGFnZSBuYW1lXG4gICAgLy8gc28gd2UgbmVlZCB0byB0byBwcm9jZXNzIGR5bmFtaWMgcm91dGVzIHByb3Blcmx5XG4gICAgLy8gVE9ETzogZml4IHR1cmJvcGFjayBwcm92aWRpbmcgZGlmZmVyaW5nIHZhbHVlIGZyb20gd2VicGFja1xuICAgIGlmIChwcm9jZXNzLmVudi5UVVJCT1BBQ0spIHtcbiAgICAgICAgc3JjUGFnZSA9IHNyY1BhZ2UucmVwbGFjZSgvXFwvaW5kZXgkLywgJycpIHx8ICcvJztcbiAgICB9IGVsc2UgaWYgKHNyY1BhZ2UgPT09ICcvaW5kZXgnKSB7XG4gICAgICAgIC8vIHdlIGFsd2F5cyBub3JtYWxpemUgL2luZGV4IHNwZWNpZmljYWxseVxuICAgICAgICBzcmNQYWdlID0gJy8nO1xuICAgIH1cbiAgICBjb25zdCBtdWx0aVpvbmVEcmFmdE1vZGUgPSBwcm9jZXNzLmVudi5fX05FWFRfTVVMVElfWk9ORV9EUkFGVF9NT0RFO1xuICAgIGNvbnN0IHByZXBhcmVSZXN1bHQgPSBhd2FpdCByb3V0ZU1vZHVsZS5wcmVwYXJlKHJlcSwgcmVzLCB7XG4gICAgICAgIHNyY1BhZ2UsXG4gICAgICAgIG11bHRpWm9uZURyYWZ0TW9kZVxuICAgIH0pO1xuICAgIGlmICghcHJlcGFyZVJlc3VsdCkge1xuICAgICAgICByZXMuc3RhdHVzQ29kZSA9IDQwMDtcbiAgICAgICAgcmVzLmVuZCgnQmFkIFJlcXVlc3QnKTtcbiAgICAgICAgY3R4LndhaXRVbnRpbCA9PSBudWxsID8gdm9pZCAwIDogY3R4LndhaXRVbnRpbC5jYWxsKGN0eCwgUHJvbWlzZS5yZXNvbHZlKCkpO1xuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG4gICAgY29uc3QgeyBidWlsZElkLCBwYXJhbXMsIG5leHRDb25maWcsIGlzRHJhZnRNb2RlLCBwcmVyZW5kZXJNYW5pZmVzdCwgcm91dGVyU2VydmVyQ29udGV4dCwgaXNPbkRlbWFuZFJldmFsaWRhdGUsIHJldmFsaWRhdGVPbmx5R2VuZXJhdGVkLCByZXNvbHZlZFBhdGhuYW1lIH0gPSBwcmVwYXJlUmVzdWx0O1xuICAgIGNvbnN0IG5vcm1hbGl6ZWRTcmNQYWdlID0gbm9ybWFsaXplQXBwUGF0aChzcmNQYWdlKTtcbiAgICBsZXQgaXNJc3IgPSBCb29sZWFuKHByZXJlbmRlck1hbmlmZXN0LmR5bmFtaWNSb3V0ZXNbbm9ybWFsaXplZFNyY1BhZ2VdIHx8IHByZXJlbmRlck1hbmlmZXN0LnJvdXRlc1tyZXNvbHZlZFBhdGhuYW1lXSk7XG4gICAgaWYgKGlzSXNyICYmICFpc0RyYWZ0TW9kZSkge1xuICAgICAgICBjb25zdCBpc1ByZXJlbmRlcmVkID0gQm9vbGVhbihwcmVyZW5kZXJNYW5pZmVzdC5yb3V0ZXNbcmVzb2x2ZWRQYXRobmFtZV0pO1xuICAgICAgICBjb25zdCBwcmVyZW5kZXJJbmZvID0gcHJlcmVuZGVyTWFuaWZlc3QuZHluYW1pY1JvdXRlc1tub3JtYWxpemVkU3JjUGFnZV07XG4gICAgICAgIGlmIChwcmVyZW5kZXJJbmZvKSB7XG4gICAgICAgICAgICBpZiAocHJlcmVuZGVySW5mby5mYWxsYmFjayA9PT0gZmFsc2UgJiYgIWlzUHJlcmVuZGVyZWQpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgTm9GYWxsYmFja0Vycm9yKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgbGV0IGNhY2hlS2V5ID0gbnVsbDtcbiAgICBpZiAoaXNJc3IgJiYgIXJvdXRlTW9kdWxlLmlzRGV2ICYmICFpc0RyYWZ0TW9kZSkge1xuICAgICAgICBjYWNoZUtleSA9IHJlc29sdmVkUGF0aG5hbWU7XG4gICAgICAgIC8vIGVuc3VyZSAvaW5kZXggYW5kIC8gaXMgbm9ybWFsaXplZCB0byBvbmUga2V5XG4gICAgICAgIGNhY2hlS2V5ID0gY2FjaGVLZXkgPT09ICcvaW5kZXgnID8gJy8nIDogY2FjaGVLZXk7XG4gICAgfVxuICAgIGNvbnN0IHN1cHBvcnRzRHluYW1pY1Jlc3BvbnNlID0gLy8gSWYgd2UncmUgaW4gZGV2ZWxvcG1lbnQsIHdlIGFsd2F5cyBzdXBwb3J0IGR5bmFtaWMgSFRNTFxuICAgIHJvdXRlTW9kdWxlLmlzRGV2ID09PSB0cnVlIHx8IC8vIElmIHRoaXMgaXMgbm90IFNTRyBvciBkb2VzIG5vdCBoYXZlIHN0YXRpYyBwYXRocywgdGhlbiBpdCBzdXBwb3J0c1xuICAgIC8vIGR5bmFtaWMgSFRNTC5cbiAgICAhaXNJc3I7XG4gICAgLy8gVGhpcyBpcyBhIHJldmFsaWRhdGlvbiByZXF1ZXN0IGlmIHRoZSByZXF1ZXN0IGlzIGZvciBhIHN0YXRpY1xuICAgIC8vIHBhZ2UgYW5kIGl0IGlzIG5vdCBiZWluZyByZXN1bWVkIGZyb20gYSBwb3N0cG9uZWQgcmVuZGVyIGFuZFxuICAgIC8vIGl0IGlzIG5vdCBhIGR5bmFtaWMgUlNDIHJlcXVlc3QgdGhlbiBpdCBpcyBhIHJldmFsaWRhdGlvblxuICAgIC8vIHJlcXVlc3QuXG4gICAgY29uc3QgaXNSZXZhbGlkYXRlID0gaXNJc3IgJiYgIXN1cHBvcnRzRHluYW1pY1Jlc3BvbnNlO1xuICAgIGNvbnN0IG1ldGhvZCA9IHJlcS5tZXRob2QgfHwgJ0dFVCc7XG4gICAgY29uc3QgdHJhY2VyID0gZ2V0VHJhY2VyKCk7XG4gICAgY29uc3QgYWN0aXZlU3BhbiA9IHRyYWNlci5nZXRBY3RpdmVTY29wZVNwYW4oKTtcbiAgICBjb25zdCBjb250ZXh0ID0ge1xuICAgICAgICBwYXJhbXMsXG4gICAgICAgIHByZXJlbmRlck1hbmlmZXN0LFxuICAgICAgICByZW5kZXJPcHRzOiB7XG4gICAgICAgICAgICBleHBlcmltZW50YWw6IHtcbiAgICAgICAgICAgICAgICBjYWNoZUNvbXBvbmVudHM6IEJvb2xlYW4obmV4dENvbmZpZy5leHBlcmltZW50YWwuY2FjaGVDb21wb25lbnRzKSxcbiAgICAgICAgICAgICAgICBhdXRoSW50ZXJydXB0czogQm9vbGVhbihuZXh0Q29uZmlnLmV4cGVyaW1lbnRhbC5hdXRoSW50ZXJydXB0cylcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBzdXBwb3J0c0R5bmFtaWNSZXNwb25zZSxcbiAgICAgICAgICAgIGluY3JlbWVudGFsQ2FjaGU6IGdldFJlcXVlc3RNZXRhKHJlcSwgJ2luY3JlbWVudGFsQ2FjaGUnKSxcbiAgICAgICAgICAgIGNhY2hlTGlmZVByb2ZpbGVzOiAoX25leHRDb25maWdfZXhwZXJpbWVudGFsID0gbmV4dENvbmZpZy5leHBlcmltZW50YWwpID09IG51bGwgPyB2b2lkIDAgOiBfbmV4dENvbmZpZ19leHBlcmltZW50YWwuY2FjaGVMaWZlLFxuICAgICAgICAgICAgaXNSZXZhbGlkYXRlLFxuICAgICAgICAgICAgd2FpdFVudGlsOiBjdHgud2FpdFVudGlsLFxuICAgICAgICAgICAgb25DbG9zZTogKGNiKT0+e1xuICAgICAgICAgICAgICAgIHJlcy5vbignY2xvc2UnLCBjYik7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgb25BZnRlclRhc2tFcnJvcjogdW5kZWZpbmVkLFxuICAgICAgICAgICAgb25JbnN0cnVtZW50YXRpb25SZXF1ZXN0RXJyb3I6IChlcnJvciwgX3JlcXVlc3QsIGVycm9yQ29udGV4dCk9PnJvdXRlTW9kdWxlLm9uUmVxdWVzdEVycm9yKHJlcSwgZXJyb3IsIGVycm9yQ29udGV4dCwgcm91dGVyU2VydmVyQ29udGV4dClcbiAgICAgICAgfSxcbiAgICAgICAgc2hhcmVkQ29udGV4dDoge1xuICAgICAgICAgICAgYnVpbGRJZFxuICAgICAgICB9XG4gICAgfTtcbiAgICBjb25zdCBub2RlTmV4dFJlcSA9IG5ldyBOb2RlTmV4dFJlcXVlc3QocmVxKTtcbiAgICBjb25zdCBub2RlTmV4dFJlcyA9IG5ldyBOb2RlTmV4dFJlc3BvbnNlKHJlcyk7XG4gICAgY29uc3QgbmV4dFJlcSA9IE5leHRSZXF1ZXN0QWRhcHRlci5mcm9tTm9kZU5leHRSZXF1ZXN0KG5vZGVOZXh0UmVxLCBzaWduYWxGcm9tTm9kZVJlc3BvbnNlKHJlcykpO1xuICAgIHRyeSB7XG4gICAgICAgIGNvbnN0IGludm9rZVJvdXRlTW9kdWxlID0gYXN5bmMgKHNwYW4pPT57XG4gICAgICAgICAgICByZXR1cm4gcm91dGVNb2R1bGUuaGFuZGxlKG5leHRSZXEsIGNvbnRleHQpLmZpbmFsbHkoKCk9PntcbiAgICAgICAgICAgICAgICBpZiAoIXNwYW4pIHJldHVybjtcbiAgICAgICAgICAgICAgICBzcGFuLnNldEF0dHJpYnV0ZXMoe1xuICAgICAgICAgICAgICAgICAgICAnaHR0cC5zdGF0dXNfY29kZSc6IHJlcy5zdGF0dXNDb2RlLFxuICAgICAgICAgICAgICAgICAgICAnbmV4dC5yc2MnOiBmYWxzZVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIGNvbnN0IHJvb3RTcGFuQXR0cmlidXRlcyA9IHRyYWNlci5nZXRSb290U3BhbkF0dHJpYnV0ZXMoKTtcbiAgICAgICAgICAgICAgICAvLyBXZSB3ZXJlIHVuYWJsZSB0byBnZXQgYXR0cmlidXRlcywgcHJvYmFibHkgT1RFTCBpcyBub3QgZW5hYmxlZFxuICAgICAgICAgICAgICAgIGlmICghcm9vdFNwYW5BdHRyaWJ1dGVzKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKHJvb3RTcGFuQXR0cmlidXRlcy5nZXQoJ25leHQuc3Bhbl90eXBlJykgIT09IEJhc2VTZXJ2ZXJTcGFuLmhhbmRsZVJlcXVlc3QpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS53YXJuKGBVbmV4cGVjdGVkIHJvb3Qgc3BhbiB0eXBlICcke3Jvb3RTcGFuQXR0cmlidXRlcy5nZXQoJ25leHQuc3Bhbl90eXBlJyl9Jy4gUGxlYXNlIHJlcG9ydCB0aGlzIE5leHQuanMgaXNzdWUgaHR0cHM6Ly9naXRodWIuY29tL3ZlcmNlbC9uZXh0LmpzYCk7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY29uc3Qgcm91dGUgPSByb290U3BhbkF0dHJpYnV0ZXMuZ2V0KCduZXh0LnJvdXRlJyk7XG4gICAgICAgICAgICAgICAgaWYgKHJvdXRlKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IG5hbWUgPSBgJHttZXRob2R9ICR7cm91dGV9YDtcbiAgICAgICAgICAgICAgICAgICAgc3Bhbi5zZXRBdHRyaWJ1dGVzKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICduZXh0LnJvdXRlJzogcm91dGUsXG4gICAgICAgICAgICAgICAgICAgICAgICAnaHR0cC5yb3V0ZSc6IHJvdXRlLFxuICAgICAgICAgICAgICAgICAgICAgICAgJ25leHQuc3Bhbl9uYW1lJzogbmFtZVxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgc3Bhbi51cGRhdGVOYW1lKG5hbWUpO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHNwYW4udXBkYXRlTmFtZShgJHttZXRob2R9ICR7cmVxLnVybH1gKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfTtcbiAgICAgICAgY29uc3QgaGFuZGxlUmVzcG9uc2UgPSBhc3luYyAoY3VycmVudFNwYW4pPT57XG4gICAgICAgICAgICB2YXIgX2NhY2hlRW50cnlfdmFsdWU7XG4gICAgICAgICAgICBjb25zdCByZXNwb25zZUdlbmVyYXRvciA9IGFzeW5jICh7IHByZXZpb3VzQ2FjaGVFbnRyeSB9KT0+e1xuICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICghZ2V0UmVxdWVzdE1ldGEocmVxLCAnbWluaW1hbE1vZGUnKSAmJiBpc09uRGVtYW5kUmV2YWxpZGF0ZSAmJiByZXZhbGlkYXRlT25seUdlbmVyYXRlZCAmJiAhcHJldmlvdXNDYWNoZUVudHJ5KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXMuc3RhdHVzQ29kZSA9IDQwNDtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIG9uLWRlbWFuZCByZXZhbGlkYXRlIGFsd2F5cyBzZXRzIHRoaXMgaGVhZGVyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXMuc2V0SGVhZGVyKCd4LW5leHRqcy1jYWNoZScsICdSRVZBTElEQVRFRCcpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmVzLmVuZCgnVGhpcyBwYWdlIGNvdWxkIG5vdCBiZSBmb3VuZCcpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBpbnZva2VSb3V0ZU1vZHVsZShjdXJyZW50U3Bhbik7XG4gICAgICAgICAgICAgICAgICAgIHJlcS5mZXRjaE1ldHJpY3MgPSBjb250ZXh0LnJlbmRlck9wdHMuZmV0Y2hNZXRyaWNzO1xuICAgICAgICAgICAgICAgICAgICBsZXQgcGVuZGluZ1dhaXRVbnRpbCA9IGNvbnRleHQucmVuZGVyT3B0cy5wZW5kaW5nV2FpdFVudGlsO1xuICAgICAgICAgICAgICAgICAgICAvLyBBdHRlbXB0IHVzaW5nIHByb3ZpZGVkIHdhaXRVbnRpbCBpZiBhdmFpbGFibGVcbiAgICAgICAgICAgICAgICAgICAgLy8gaWYgaXQncyBub3Qgd2UgZmFsbGJhY2sgdG8gc2VuZFJlc3BvbnNlJ3MgaGFuZGxpbmdcbiAgICAgICAgICAgICAgICAgICAgaWYgKHBlbmRpbmdXYWl0VW50aWwpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjdHgud2FpdFVudGlsKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY3R4LndhaXRVbnRpbChwZW5kaW5nV2FpdFVudGlsKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwZW5kaW5nV2FpdFVudGlsID0gdW5kZWZpbmVkO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGNhY2hlVGFncyA9IGNvbnRleHQucmVuZGVyT3B0cy5jb2xsZWN0ZWRUYWdzO1xuICAgICAgICAgICAgICAgICAgICAvLyBJZiB0aGUgcmVxdWVzdCBpcyBmb3IgYSBzdGF0aWMgcmVzcG9uc2UsIHdlIGNhbiBjYWNoZSBpdCBzbyBsb25nXG4gICAgICAgICAgICAgICAgICAgIC8vIGFzIGl0J3Mgbm90IGVkZ2UuXG4gICAgICAgICAgICAgICAgICAgIGlmIChpc0lzcikge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgYmxvYiA9IGF3YWl0IHJlc3BvbnNlLmJsb2IoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIENvcHkgdGhlIGhlYWRlcnMgZnJvbSB0aGUgcmVzcG9uc2UuXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBoZWFkZXJzID0gdG9Ob2RlT3V0Z29pbmdIdHRwSGVhZGVycyhyZXNwb25zZS5oZWFkZXJzKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjYWNoZVRhZ3MpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBoZWFkZXJzW05FWFRfQ0FDSEVfVEFHU19IRUFERVJdID0gY2FjaGVUYWdzO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFoZWFkZXJzWydjb250ZW50LXR5cGUnXSAmJiBibG9iLnR5cGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBoZWFkZXJzWydjb250ZW50LXR5cGUnXSA9IGJsb2IudHlwZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHJldmFsaWRhdGUgPSB0eXBlb2YgY29udGV4dC5yZW5kZXJPcHRzLmNvbGxlY3RlZFJldmFsaWRhdGUgPT09ICd1bmRlZmluZWQnIHx8IGNvbnRleHQucmVuZGVyT3B0cy5jb2xsZWN0ZWRSZXZhbGlkYXRlID49IElORklOSVRFX0NBQ0hFID8gZmFsc2UgOiBjb250ZXh0LnJlbmRlck9wdHMuY29sbGVjdGVkUmV2YWxpZGF0ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGV4cGlyZSA9IHR5cGVvZiBjb250ZXh0LnJlbmRlck9wdHMuY29sbGVjdGVkRXhwaXJlID09PSAndW5kZWZpbmVkJyB8fCBjb250ZXh0LnJlbmRlck9wdHMuY29sbGVjdGVkRXhwaXJlID49IElORklOSVRFX0NBQ0hFID8gdW5kZWZpbmVkIDogY29udGV4dC5yZW5kZXJPcHRzLmNvbGxlY3RlZEV4cGlyZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIENyZWF0ZSB0aGUgY2FjaGUgZW50cnkgZm9yIHRoZSByZXNwb25zZS5cbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGNhY2hlRW50cnkgPSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAga2luZDogQ2FjaGVkUm91dGVLaW5kLkFQUF9ST1VURSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RhdHVzOiByZXNwb25zZS5zdGF0dXMsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJvZHk6IEJ1ZmZlci5mcm9tKGF3YWl0IGJsb2IuYXJyYXlCdWZmZXIoKSksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhlYWRlcnNcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhY2hlQ29udHJvbDoge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXZhbGlkYXRlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBleHBpcmVcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGNhY2hlRW50cnk7XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBzZW5kIHJlc3BvbnNlIHdpdGhvdXQgY2FjaGluZyBpZiBub3QgSVNSXG4gICAgICAgICAgICAgICAgICAgICAgICBhd2FpdCBzZW5kUmVzcG9uc2Uobm9kZU5leHRSZXEsIG5vZGVOZXh0UmVzLCByZXNwb25zZSwgY29udGV4dC5yZW5kZXJPcHRzLnBlbmRpbmdXYWl0VW50aWwpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gaWYgdGhpcyBpcyBhIGJhY2tncm91bmQgcmV2YWxpZGF0ZSB3ZSBuZWVkIHRvIHJlcG9ydFxuICAgICAgICAgICAgICAgICAgICAvLyB0aGUgcmVxdWVzdCBlcnJvciBoZXJlIGFzIGl0IHdvbid0IGJlIGJ1YmJsZWRcbiAgICAgICAgICAgICAgICAgICAgaWYgKHByZXZpb3VzQ2FjaGVFbnRyeSA9PSBudWxsID8gdm9pZCAwIDogcHJldmlvdXNDYWNoZUVudHJ5LmlzU3RhbGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IHJvdXRlTW9kdWxlLm9uUmVxdWVzdEVycm9yKHJlcSwgZXJyLCB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcm91dGVyS2luZDogJ0FwcCBSb3V0ZXInLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJvdXRlUGF0aDogc3JjUGFnZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByb3V0ZVR5cGU6ICdyb3V0ZScsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV2YWxpZGF0ZVJlYXNvbjogZ2V0UmV2YWxpZGF0ZVJlYXNvbih7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlzUmV2YWxpZGF0ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaXNPbkRlbWFuZFJldmFsaWRhdGVcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgICAgICAgICAgfSwgcm91dGVyU2VydmVyQ29udGV4dCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgZXJyO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBjb25zdCBjYWNoZUVudHJ5ID0gYXdhaXQgcm91dGVNb2R1bGUuaGFuZGxlUmVzcG9uc2Uoe1xuICAgICAgICAgICAgICAgIHJlcSxcbiAgICAgICAgICAgICAgICBuZXh0Q29uZmlnLFxuICAgICAgICAgICAgICAgIGNhY2hlS2V5LFxuICAgICAgICAgICAgICAgIHJvdXRlS2luZDogUm91dGVLaW5kLkFQUF9ST1VURSxcbiAgICAgICAgICAgICAgICBpc0ZhbGxiYWNrOiBmYWxzZSxcbiAgICAgICAgICAgICAgICBwcmVyZW5kZXJNYW5pZmVzdCxcbiAgICAgICAgICAgICAgICBpc1JvdXRlUFBSRW5hYmxlZDogZmFsc2UsXG4gICAgICAgICAgICAgICAgaXNPbkRlbWFuZFJldmFsaWRhdGUsXG4gICAgICAgICAgICAgICAgcmV2YWxpZGF0ZU9ubHlHZW5lcmF0ZWQsXG4gICAgICAgICAgICAgICAgcmVzcG9uc2VHZW5lcmF0b3IsXG4gICAgICAgICAgICAgICAgd2FpdFVudGlsOiBjdHgud2FpdFVudGlsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIC8vIHdlIGRvbid0IGNyZWF0ZSBhIGNhY2hlRW50cnkgZm9yIElTUlxuICAgICAgICAgICAgaWYgKCFpc0lzcikge1xuICAgICAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKChjYWNoZUVudHJ5ID09IG51bGwgPyB2b2lkIDAgOiAoX2NhY2hlRW50cnlfdmFsdWUgPSBjYWNoZUVudHJ5LnZhbHVlKSA9PSBudWxsID8gdm9pZCAwIDogX2NhY2hlRW50cnlfdmFsdWUua2luZCkgIT09IENhY2hlZFJvdXRlS2luZC5BUFBfUk9VVEUpIHtcbiAgICAgICAgICAgICAgICB2YXIgX2NhY2hlRW50cnlfdmFsdWUxO1xuICAgICAgICAgICAgICAgIHRocm93IE9iamVjdC5kZWZpbmVQcm9wZXJ0eShuZXcgRXJyb3IoYEludmFyaWFudDogYXBwLXJvdXRlIHJlY2VpdmVkIGludmFsaWQgY2FjaGUgZW50cnkgJHtjYWNoZUVudHJ5ID09IG51bGwgPyB2b2lkIDAgOiAoX2NhY2hlRW50cnlfdmFsdWUxID0gY2FjaGVFbnRyeS52YWx1ZSkgPT0gbnVsbCA/IHZvaWQgMCA6IF9jYWNoZUVudHJ5X3ZhbHVlMS5raW5kfWApLCBcIl9fTkVYVF9FUlJPUl9DT0RFXCIsIHtcbiAgICAgICAgICAgICAgICAgICAgdmFsdWU6IFwiRTcwMVwiLFxuICAgICAgICAgICAgICAgICAgICBlbnVtZXJhYmxlOiBmYWxzZSxcbiAgICAgICAgICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoIWdldFJlcXVlc3RNZXRhKHJlcSwgJ21pbmltYWxNb2RlJykpIHtcbiAgICAgICAgICAgICAgICByZXMuc2V0SGVhZGVyKCd4LW5leHRqcy1jYWNoZScsIGlzT25EZW1hbmRSZXZhbGlkYXRlID8gJ1JFVkFMSURBVEVEJyA6IGNhY2hlRW50cnkuaXNNaXNzID8gJ01JU1MnIDogY2FjaGVFbnRyeS5pc1N0YWxlID8gJ1NUQUxFJyA6ICdISVQnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIERyYWZ0IG1vZGUgc2hvdWxkIG5ldmVyIGJlIGNhY2hlZFxuICAgICAgICAgICAgaWYgKGlzRHJhZnRNb2RlKSB7XG4gICAgICAgICAgICAgICAgcmVzLnNldEhlYWRlcignQ2FjaGUtQ29udHJvbCcsICdwcml2YXRlLCBuby1jYWNoZSwgbm8tc3RvcmUsIG1heC1hZ2U9MCwgbXVzdC1yZXZhbGlkYXRlJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCBoZWFkZXJzID0gZnJvbU5vZGVPdXRnb2luZ0h0dHBIZWFkZXJzKGNhY2hlRW50cnkudmFsdWUuaGVhZGVycyk7XG4gICAgICAgICAgICBpZiAoIShnZXRSZXF1ZXN0TWV0YShyZXEsICdtaW5pbWFsTW9kZScpICYmIGlzSXNyKSkge1xuICAgICAgICAgICAgICAgIGhlYWRlcnMuZGVsZXRlKE5FWFRfQ0FDSEVfVEFHU19IRUFERVIpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gSWYgY2FjaGUgY29udHJvbCBpcyBhbHJlYWR5IHNldCBvbiB0aGUgcmVzcG9uc2Ugd2UgZG9uJ3RcbiAgICAgICAgICAgIC8vIG92ZXJyaWRlIGl0IHRvIGFsbG93IHVzZXJzIHRvIGN1c3RvbWl6ZSBpdCB2aWEgbmV4dC5jb25maWdcbiAgICAgICAgICAgIGlmIChjYWNoZUVudHJ5LmNhY2hlQ29udHJvbCAmJiAhcmVzLmdldEhlYWRlcignQ2FjaGUtQ29udHJvbCcpICYmICFoZWFkZXJzLmdldCgnQ2FjaGUtQ29udHJvbCcpKSB7XG4gICAgICAgICAgICAgICAgaGVhZGVycy5zZXQoJ0NhY2hlLUNvbnRyb2wnLCBnZXRDYWNoZUNvbnRyb2xIZWFkZXIoY2FjaGVFbnRyeS5jYWNoZUNvbnRyb2wpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGF3YWl0IHNlbmRSZXNwb25zZShub2RlTmV4dFJlcSwgbm9kZU5leHRSZXMsIG5ldyBSZXNwb25zZShjYWNoZUVudHJ5LnZhbHVlLmJvZHksIHtcbiAgICAgICAgICAgICAgICBoZWFkZXJzLFxuICAgICAgICAgICAgICAgIHN0YXR1czogY2FjaGVFbnRyeS52YWx1ZS5zdGF0dXMgfHwgMjAwXG4gICAgICAgICAgICB9KSk7XG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgfTtcbiAgICAgICAgLy8gVE9ETzogYWN0aXZlU3BhbiBjb2RlIHBhdGggaXMgZm9yIHdoZW4gd3JhcHBlZCBieVxuICAgICAgICAvLyBuZXh0LXNlcnZlciBjYW4gYmUgcmVtb3ZlZCB3aGVuIHRoaXMgaXMgbm8gbG9uZ2VyIHVzZWRcbiAgICAgICAgaWYgKGFjdGl2ZVNwYW4pIHtcbiAgICAgICAgICAgIGF3YWl0IGhhbmRsZVJlc3BvbnNlKGFjdGl2ZVNwYW4pO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgYXdhaXQgdHJhY2VyLndpdGhQcm9wYWdhdGVkQ29udGV4dChyZXEuaGVhZGVycywgKCk9PnRyYWNlci50cmFjZShCYXNlU2VydmVyU3Bhbi5oYW5kbGVSZXF1ZXN0LCB7XG4gICAgICAgICAgICAgICAgICAgIHNwYW5OYW1lOiBgJHttZXRob2R9ICR7cmVxLnVybH1gLFxuICAgICAgICAgICAgICAgICAgICBraW5kOiBTcGFuS2luZC5TRVJWRVIsXG4gICAgICAgICAgICAgICAgICAgIGF0dHJpYnV0ZXM6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICdodHRwLm1ldGhvZCc6IG1ldGhvZCxcbiAgICAgICAgICAgICAgICAgICAgICAgICdodHRwLnRhcmdldCc6IHJlcS51cmxcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0sIGhhbmRsZVJlc3BvbnNlKSk7XG4gICAgICAgIH1cbiAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgICAgLy8gaWYgd2UgYXJlbid0IHdyYXBwZWQgYnkgYmFzZS1zZXJ2ZXIgaGFuZGxlIGhlcmVcbiAgICAgICAgaWYgKCFhY3RpdmVTcGFuICYmICEoZXJyIGluc3RhbmNlb2YgTm9GYWxsYmFja0Vycm9yKSkge1xuICAgICAgICAgICAgYXdhaXQgcm91dGVNb2R1bGUub25SZXF1ZXN0RXJyb3IocmVxLCBlcnIsIHtcbiAgICAgICAgICAgICAgICByb3V0ZXJLaW5kOiAnQXBwIFJvdXRlcicsXG4gICAgICAgICAgICAgICAgcm91dGVQYXRoOiBub3JtYWxpemVkU3JjUGFnZSxcbiAgICAgICAgICAgICAgICByb3V0ZVR5cGU6ICdyb3V0ZScsXG4gICAgICAgICAgICAgICAgcmV2YWxpZGF0ZVJlYXNvbjogZ2V0UmV2YWxpZGF0ZVJlYXNvbih7XG4gICAgICAgICAgICAgICAgICAgIGlzUmV2YWxpZGF0ZSxcbiAgICAgICAgICAgICAgICAgICAgaXNPbkRlbWFuZFJldmFsaWRhdGVcbiAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgLy8gcmV0aHJvdyBzbyB0aGF0IHdlIGNhbiBoYW5kbGUgc2VydmluZyBlcnJvciBwYWdlXG4gICAgICAgIC8vIElmIHRoaXMgaXMgZHVyaW5nIHN0YXRpYyBnZW5lcmF0aW9uLCB0aHJvdyB0aGUgZXJyb3IgYWdhaW4uXG4gICAgICAgIGlmIChpc0lzcikgdGhyb3cgZXJyO1xuICAgICAgICAvLyBPdGhlcndpc2UsIHNlbmQgYSA1MDAgcmVzcG9uc2UuXG4gICAgICAgIGF3YWl0IHNlbmRSZXNwb25zZShub2RlTmV4dFJlcSwgbm9kZU5leHRSZXMsIG5ldyBSZXNwb25zZShudWxsLCB7XG4gICAgICAgICAgICBzdGF0dXM6IDUwMFxuICAgICAgICB9KSk7XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbn1cblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9YXBwLXJvdXRlLmpzLm1hcFxuIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Fprodutos%2F%5Bcodigo%5D%2Fimagens%2Froute&page=%2Fapi%2Fprodutos%2F%5Bcodigo%5D%2Fimagens%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fprodutos%2F%5Bcodigo%5D%2Fimagens%2Froute.ts&appDir=C%3A%5CUsers%5Condyd%5CDocuments%5Cretaguarda_new%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5Condyd%5CDocuments%5Cretaguarda_new&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D&isGlobalNotFoundEnabled=!\n");

/***/ }),

/***/ "(rsc)/./node_modules/next/dist/build/webpack/loaders/next-flight-client-entry-loader.js?server=true!":
/*!******************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-flight-client-entry-loader.js?server=true! ***!
  \******************************************************************************************************/
/***/ (() => {



/***/ }),

/***/ "(ssr)/./node_modules/next/dist/build/webpack/loaders/next-flight-client-entry-loader.js?server=true!":
/*!******************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-flight-client-entry-loader.js?server=true! ***!
  \******************************************************************************************************/
/***/ (() => {



/***/ }),

/***/ "../app-render/action-async-storage.external":
/*!*******************************************************************************!*\
  !*** external "next/dist/server/app-render/action-async-storage.external.js" ***!
  \*******************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/server/app-render/action-async-storage.external.js");

/***/ }),

/***/ "../app-render/after-task-async-storage.external":
/*!***********************************************************************************!*\
  !*** external "next/dist/server/app-render/after-task-async-storage.external.js" ***!
  \***********************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/server/app-render/after-task-async-storage.external.js");

/***/ }),

/***/ "./work-async-storage.external":
/*!*****************************************************************************!*\
  !*** external "next/dist/server/app-render/work-async-storage.external.js" ***!
  \*****************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/server/app-render/work-async-storage.external.js");

/***/ }),

/***/ "./work-unit-async-storage.external":
/*!**********************************************************************************!*\
  !*** external "next/dist/server/app-render/work-unit-async-storage.external.js" ***!
  \**********************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/server/app-render/work-unit-async-storage.external.js");

/***/ }),

/***/ "fs":
/*!*********************!*\
  !*** external "fs" ***!
  \*********************/
/***/ ((module) => {

"use strict";
module.exports = require("fs");

/***/ }),

/***/ "next/dist/compiled/next-server/app-page.runtime.dev.js":
/*!*************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-page.runtime.dev.js" ***!
  \*************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/compiled/next-server/app-page.runtime.dev.js");

/***/ }),

/***/ "next/dist/compiled/next-server/app-route.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-route.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/compiled/next-server/app-route.runtime.dev.js");

/***/ }),

/***/ "next/dist/shared/lib/no-fallback-error.external":
/*!******************************************************************!*\
  !*** external "next/dist/shared/lib/no-fallback-error.external" ***!
  \******************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/shared/lib/no-fallback-error.external");

/***/ }),

/***/ "next/dist/shared/lib/router/utils/app-paths":
/*!**************************************************************!*\
  !*** external "next/dist/shared/lib/router/utils/app-paths" ***!
  \**************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/shared/lib/router/utils/app-paths");

/***/ }),

/***/ "path":
/*!***********************!*\
  !*** external "path" ***!
  \***********************/
/***/ ((module) => {

"use strict";
module.exports = require("path");

/***/ }),

/***/ "sharp":
/*!************************!*\
  !*** external "sharp" ***!
  \************************/
/***/ ((module) => {

"use strict";
module.exports = require("sharp");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../../../webpack-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next"], () => (__webpack_exec__("(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Fprodutos%2F%5Bcodigo%5D%2Fimagens%2Froute&page=%2Fapi%2Fprodutos%2F%5Bcodigo%5D%2Fimagens%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fprodutos%2F%5Bcodigo%5D%2Fimagens%2Froute.ts&appDir=C%3A%5CUsers%5Condyd%5CDocuments%5Cretaguarda_new%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5Condyd%5CDocuments%5Cretaguarda_new&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D&isGlobalNotFoundEnabled=!")));
module.exports = __webpack_exports__;

})();